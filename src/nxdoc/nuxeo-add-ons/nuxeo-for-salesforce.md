---
title: Nuxeo Salesforce Connector
review:
    comment: ''
    date: '2017-12-19'
    status: ok
labels:
    - lts2016-ok
    - salesforce-component
    - vpasquier
    - link-update
    - excerpt
    - multiexcerpt-include
    - lts2017-ok
    - deprecated
toc: true
hidden: true
confluence:
    ajs-parent-page-id: '16089349'
    ajs-parent-page-title: Nuxeo Add-Ons
    ajs-space-key: NXDOC
    ajs-space-name: Nuxeo Platform Developer Documentation
    canonical: Nuxeo+for+Salesforce
    canonical_source: 'https://doc.nuxeo.com/display/NXDOC/Nuxeo+for+Salesforce'
    page_id: '26316748'
    shortlink: zI_RAQ
    shortlink_source: 'https://doc.nuxeo.com/x/zI_RAQ'
    source_link: /display/NXDOC/Nuxeo+for+Salesforce
tree_item_index: 1800
history:
    -
        author: Solen Guitter
        date: '2016-07-11 15:26'
        message: ix format and lin
        version: '40'
    -
        author: Anne Jubert
        date: '2016-07-11 15:21'
        message: ''
        version: '39'
    -
        author: Anne Jubert
        date: '2016-06-29 09:41'
        message: ''
        version: '38'
    -
        author: Anne Jubert
        date: '2016-06-29 08:03'
        message: ''
        version: '37'
    -
        author: Anne Jubert
        date: '2016-06-28 19:41'
        message: ''
        version: '36'
    -
        author: Anne Jubert
        date: '2016-06-28 19:39'
        message: ''
        version: '35'
    -
        author: Anne Jubert
        date: '2016-06-28 15:36'
        message: ''
        version: '34'
    -
        author: Anne Jubert
        date: '2016-06-28 15:34'
        message: ''
        version: '33'
    -
        author: Anne Jubert
        date: '2016-06-28 15:21'
        message: ''
        version: '32'
    -
        author: Vladimir Pasquier
        date: '2016-06-16 15:30'
        message: ''
        version: '31'
    -
        author: Joshua Fletcher
        date: '2016-02-05 00:35'
        message: ''
        version: '30'
    -
        author: Solen Guitter
        date: '2016-01-04 09:43'
        message: ''
        version: '29'
    -
        author: Joshua Fletcher
        date: '2015-12-30 22:48'
        message: Improve SFDC docs.
        version: '28'
    -
        author: Solen Guitter
        date: '2015-12-21 16:43'
        message: ''
        version: '27'
    -
        author: Solen Guitter
        date: '2015-12-16 14:54'
        message: ''
        version: '26'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 21:17'
        message: ''
        version: '25'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 21:13'
        message: ''
        version: '24'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 21:11'
        message: ''
        version: '23'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 21:06'
        message: ''
        version: '22'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 21:05'
        message: ''
        version: '21'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 20:55'
        message: ''
        version: '20'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 20:52'
        message: ''
        version: '19'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 20:50'
        message: ''
        version: '18'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 20:50'
        message: ''
        version: '17'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 20:49'
        message: ''
        version: '16'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 20:48'
        message: ''
        version: '15'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 20:48'
        message: ''
        version: '14'
    -
        author: Vladimir Pasquier
        date: '2015-12-15 20:47'
        message: ''
        version: '13'
    -
        author: Solen Guitter
        date: '2015-11-30 09:43'
        message: 'NXDOC-658: Marketplace packages are now called Nuxeo Packages, format'
        version: '12'
    -
        author: Vladimir Pasquier
        date: '2015-11-05 21:44'
        message: ''
        version: '11'
    -
        author: Vladimir Pasquier
        date: '2015-11-05 21:40'
        message: ''
        version: '10'
    -
        author: Vladimir Pasquier
        date: '2015-10-13 17:47'
        message: ''
        version: '9'
    -
        author: Vladimir Pasquier
        date: '2015-10-09 20:38'
        message: ''
        version: '8'
    -
        author: Vladimir Pasquier
        date: '2015-10-06 19:12'
        message: ''
        version: '7'
    -
        author: Vladimir Pasquier
        date: '2015-10-06 17:39'
        message: ''
        version: '6'
    -
        author: Vladimir Pasquier
        date: '2015-10-06 17:39'
        message: ''
        version: '5'
    -
        author: Vladimir Pasquier
        date: '2015-09-28 20:01'
        message: ''
        version: '4'
    -
        author: Vladimir Pasquier
        date: '2015-09-28 19:47'
        message: ''
        version: '3'
    -
        author: Vladimir Pasquier
        date: '2015-09-28 19:47'
        message: ''
        version: '2'
    -
        author: Vladimir Pasquier
        date: '2015-09-28 19:32'
        message: ''
        version: '1'

---


{{! excerpt}}
The [Nuxeo Salesforce connector](https://connect.nuxeo.com/nuxeo/site/marketplace/package/nuxeo-salesforce) covers several use cases of integration between the Nuxeo Repository and Salesforce: 
* binding a folder in Nuxeo and an object (opportunity, case, account, ...) in Salesforce, for object level document / media library
* presenting to salesforce usuers object-contextual lists of documents based on custom metadata queries
* general search across the Nuxeo repository
{{! /excerpt}}

See [GitHub Readme](https://github.com/nuxeo/nuxeo-salesforce) for the Dev project description.

## Overview
Watch [this Nuxeo University video](https://university.nuxeo.com/learn/course/external/view/elearning/221/salesforce-connector) for a functional overview.

## Installation

### Architecture

The Nuxeo Salesforce connector is made of:

- a servert part, made available as a [Nuxeo marketplace package](https://connect.nuxeo.com/nuxeo/site/marketplace/package/nuxeo-salesforce) "nuxeo-salesforce" that installs a Nuxeo Platform addon.

- a Salesforce unlocked package that installs some Salesforce lightening components and a few more Saleforce resources

### Nuxeo Marketplace package installation

The Nuxeo Marketplace Package can be found [Here](https://connect.nuxeo.com/nuxeo/site/marketplace/package/nuxeo-salesforce).
{{{multiexcerpt 'MP-installation-easy' page='Generic Multi-Excerpts'}}}

Server requirements:
- You must be on HF-34 at least to benefit from all required bugfixes for an optimal experience with the Salesforce connector. 
- You also must set sames-site cookie policy in `nuxeo.conf`:
`nuxeo.server.cookies.sameSite=none` 
- Server must always be accessed in https

### Salesforce package installation.

Prerequesite: you must have installed the [Salesforce CLI](https://developer.salesforce.com/docs/component-library/documentation/en/lwc/lwc.get_started_cli) and have it authenticated against your Salesforce organization. 

The Nuxeo Salesforce package is currently made available as an [unlocked package](https://developer.salesforce.com/docs/atlas.en-us.sfdx_dev.meta/sfdx_dev/sfdx_dev_unlocked_pkg_intro.htm). Nuxeo will longer term publish it as a managed package on Salesforce marketplace. 

To install the version of the unlocked salesforce package that has been validated with the version of the Nuxeo marketplace pacakge installed on your preprod  Nuxeo server instance, using sfdx client :

`sfdx force:package:install -p 04t7R000001WYVjQAO -k nxapp@sfdc`

`04t7R000001WYVjQAO` is the version id of the salesforce package for 10.10.14 version of the Nuxeo Marketplace pacakge. We will let on the Nuxeo Pacakge description on the Nuxeo Marketplace the right Salesforce package version id to use for a given Nuxeo package version.  

### Post Installation Setup

After installing the package, you need to configure Salesforce to be able to use the Nuxeo application.

#### Define the Nuxeo Application administrators

Add the `Nuxeo_Admins` permission set to the Salesforce user(s) that are allowed to configure the Nuxeo application (user bound to sfdx authentication already has the permission set so this is an optional step):

Go to `Setup > Users`, enter the target user, then go to the `Permission Set Assignments` section to add the permission set.

This can also be done from commandline using the `sfdx force:user:permset:assign` command

#### Define the Nuxeo Application users

Add the `Nuxeo_Users` permission set to the Salesforce users allowed to use the Nuxeo application, as we expalained above. You can also use **Permission Set Groups** to easily assign permission groups to multiple users.  \
Currently, Salesforce doesn't support assigning permission sets to **Public Groups**.

#### Add the target Nuxeo domain URL to CSP Trusted Sites.

Go to `Setup > CSP Trusted Sites` and create a new **Trusted Site** using the base https URL of the target Nuxeo server - without the trailing `/nuxeo` path. Example: `https://your.nuxeo-instance.com`

#### Create a Nuxeo Connection.

As a `Nuxeo_admins` user open the **Nuxeo** tab (this tab is only visible for Nuxeo_Admins) and follow the connection setup wizard. Don't forget to set the right username / password for the cURL call.
NB: you will need Nuxeo instance admin credentials.


### Validating your set up

You can validate your set up is correct by using the Nuxeo Salesforce lightening component on a given SF object's page (ex: an Opportunity record), by clicking on "Edit page" with an admin user of the org and then dropping the Nuxeo component inside the page layout. Activate the configuration (select Dekstop) and then save and go back to  user screen. 
You shoudl be able to click on a "Log in" button, that will open a pop up asking for authentication against the Nuxeo server if the user is not already authenticated in there. You can then drop a document in the library, it will be created in Nuxeo: everything is working!
