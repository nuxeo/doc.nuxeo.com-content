---
title: Theme
review:
    comment: ''
    date: '2019-10-21'
    status: ok
labels:
    - lts2016-ok
    - theme
    - atchertchian
    - link-update
    - excerpt
    - content-review-lts2017
    - jsf-ui
toc: true
confluence:
    ajs-parent-page-id: '16089312'
    ajs-parent-page-title: JSF UI Framework
    ajs-space-key: NXDOC
    ajs-space-name: Nuxeo Platform Developer Documentation
    canonical: Theme
    canonical_source: 'https://doc.nuxeo.com/display/NXDOC/Theme'
    page_id: '950327'
    shortlink: N4AO
    shortlink_source: 'https://doc.nuxeo.com/x/N4AO'
    source_link: /display/NXDOC/Theme
tree_item_index: 600
history:
    -
        author: Manon Lumeau
        date: '2016-08-12 15:07'
        message: ix link to ancho
        version: '71'
    -
        author: Anahide Tchertchian
        date: '2016-08-12 14:48'
        message: fix typo
        version: '70'
    -
        author: Manon Lumeau
        date: '2016-02-09 15:18'
        message: ''
        version: '69'
    -
        author: Solen Guitter
        date: '2016-02-08 14:02'
        message: ''
        version: '68'
    -
        author: Solen Guitter
        date: '2016-02-08 14:01'
        message: Fix wrong closing tags in Resources section
        version: '67'
    -
        author: Manon Lumeau
        date: '2016-01-19 10:25'
        message: ''
        version: '66'
    -
        author: Anahide Tchertchian
        date: '2016-01-18 16:31'
        message: 'NXP-18127: explain defer of JS resources'
        version: '65'
    -
        author: Manon Lumeau
        date: '2015-10-14 13:38'
        message: ''
        version: '64'
    -
        author: Lise Kemen
        date: '2015-10-13 16:12'
        message: ''
        version: '63'
    -
        author: Lise Kemen
        date: '2015-10-13 16:07'
        message: ''
        version: '62'
    -
        author: Lise Kemen
        date: '2015-10-13 15:41'
        message: ''
        version: '61'
    -
        author: Manon Lumeau
        date: '2015-08-28 14:36'
        message: ''
        version: '60'
    -
        author: Anahide Tchertchian
        date: '2015-08-19 12:12'
        message: 'NXP-17713: move favicons conf'
        version: '59'
    -
        author: Anahide Tchertchian
        date: '2015-08-12 16:31'
        message: 'NXP-11439: use "Nuxeo Platform-7.3" instead of "latest" in links to explorer...'
        version: '58'
    -
        author: Anahide Tchertchian
        date: '2015-08-05 09:31'
        message: 'NXDOC-577: add link to nxr tlddoc'
        version: '57'
    -
        author: Solen Guitter
        date: '2015-08-04 08:34'
        message: ''
        version: '56'
    -
        author: Anahide Tchertchian
        date: '2015-08-04 07:36'
        message: 'NXDOC-577: mention HTML resources'
        version: '55'
    -
        author: Anahide Tchertchian
        date: '2015-08-03 12:27'
        message: 'NXDOC-577: add more details about resource types'
        version: '54'
    -
        author: Anahide Tchertchian
        date: '2015-08-03 09:10'
        message: ''
        version: '53'
    -
        author: Solen Guitter
        date: '2015-07-31 09:17'
        message: 'Update related pages, formatting'
        version: '52'
    -
        author: Anahide Tchertchian
        date: '2015-07-30 16:43'
        message: 'NXDOC-577: finish first version new theme doc'
        version: '51'
    -
        author: Anahide Tchertchian
        date: '2015-07-30 16:40'
        message: 'NXDOC-577: wip'
        version: '50'
    -
        author: Anahide Tchertchian
        date: '2015-07-30 16:39'
        message: 'NXDOC-577: wip'
        version: '49'
    -
        author: Anahide Tchertchian
        date: '2015-07-30 16:23'
        message: 'NXDOC-577: wip'
        version: '48'
    -
        author: Anahide Tchertchian
        date: '2015-07-30 15:56'
        message: 'NXDOC-577: wip'
        version: '47'
    -
        author: Anahide Tchertchian
        date: '2015-07-30 15:35'
        message: 'NXDOC-577: wip'
        version: '46'
    -
        author: Anahide Tchertchian
        date: '2015-07-30 15:23'
        message: 'NXDOC-577: wip'
        version: '45'
    -
        author: Anahide Tchertchian
        date: '2015-07-30 14:56'
        message: 'NXDOC-577: wip'
        version: '44'
    -
        author: Anahide Tchertchian
        date: '2015-07-30 14:36'
        message: Reverted from v. 41
        version: '43'
    -
        author: Anahide Tchertchian
        date: '2015-07-30 14:25'
        message: ''
        version: '42'
    -
        author: Anahide Tchertchian
        date: '2015-07-30 14:04'
        message: 'NXDOC-577: wip'
        version: '41'
    -
        author: Anahide Tchertchian
        date: '2015-07-30 13:07'
        message: 'NXDOC-577: update theme doc'
        version: '40'
    -
        author: Solen Guitter
        date: '2014-10-03 15:25'
        message: link update
        version: '39'
    -
        author: Manon Lumeau
        date: '2014-09-17 11:09'
        message: ''
        version: '38'
    -
        author: Manon Lumeau
        date: '2014-09-16 16:53'
        message: ''
        version: '37'
    -
        author: Solen Guitter
        date: '2014-08-21 12:09'
        message: Removed 5.5 references and formattin
        version: '36'
    -
        author: Manon Lumeau
        date: '2014-07-04 17:19'
        message: ''
        version: '35'
    -
        author: Solen Guitter
        date: '2014-01-23 18:32'
        message: ''
        version: '34'
    -
        author: Solen Guitter
        date: '2014-01-07 14:32'
        message: Fixed broken related content links
        version: '33'
    -
        author: Solen Guitter
        date: '2014-01-07 11:53'
        message: ''
        version: '32'
    -
        author: Solen Guitter
        date: '2014-01-07 11:53'
        message: ''
        version: '31'
    -
        author: Solen Guitter
        date: '2014-01-06 17:23'
        message: ''
        version: '30'
    -
        author: Solen Guitter
        date: '2014-01-06 17:20'
        message: ''
        version: '29'
    -
        author: Solen Guitter
        date: '2013-09-04 18:44'
        message: ''
        version: '28'
    -
        author: Lise Kemen
        date: '2013-05-03 11:59'
        message: ''
        version: '27'
    -
        author: Lise Kemen
        date: '2012-12-04 16:34'
        message: ''
        version: '26'
    -
        author: Solen Guitter
        date: '2012-12-04 09:33'
        message: ''
        version: '25'
    -
        author: Solen Guitter
        date: '2012-09-11 22:27'
        message: Migrated to Confluence 4.0
        version: '24'
    -
        author: Solen Guitter
        date: '2012-09-11 22:27'
        message: ''
        version: '23'
    -
        author: Anahide Tchertchian
        date: '2012-08-07 12:16'
        message: ''
        version: '22'
    -
        author: Solen Guitter
        date: '2012-06-19 11:55'
        message: Added related pages
        version: '21'
    -
        author: Vladimir Pasquier
        date: '2012-01-02 10:40'
        message: ''
        version: '20'
    -
        author: Lise Kemen
        date: '2011-12-23 18:33'
        message: ''
        version: '19'
    -
        author: Lise Kemen
        date: '2011-12-23 18:32'
        message: ''
        version: '18'
    -
        author: Anahide Tchertchian
        date: '2011-12-21 13:42'
        message: ''
        version: '17'
    -
        author: Florent Guillaume
        date: '2011-12-20 17:01'
        message: ''
        version: '16'
    -
        author: Antoine Taillefer
        date: '2011-12-19 13:16'
        message: ''
        version: '15'
    -
        author: Antoine Taillefer
        date: '2011-12-19 13:15'
        message: ult
        version: '14'
    -
        author: Antoine Taillefer
        date: '2011-12-19 13:13'
        message: ''
        version: '13'
    -
        author: Antoine Taillefer
        date: '2011-12-19 13:11'
        message: ''
        version: '12'
    -
        author: Antoine Taillefer
        date: '2011-12-19 13:05'
        message: ''
        version: '11'
    -
        author: Antoine Taillefer
        date: '2011-12-19 13:03'
        message: ''
        version: '10'
    -
        author: Antoine Taillefer
        date: '2011-12-19 12:56'
        message: ''
        version: '9'
    -
        author: Antoine Taillefer
        date: '2011-12-19 12:53'
        message: ''
        version: '8'
    -
        author: Antoine Taillefer
        date: '2011-12-19 12:37'
        message: ''
        version: '7'
    -
        author: Antoine Taillefer
        date: '2011-12-19 12:26'
        message: ''
        version: '6'
    -
        author: Antoine Taillefer
        date: '2011-12-19 11:50'
        message: age
        version: '5'
    -
        author: Antoine Taillefer
        date: '2011-12-19 11:12'
        message: age
        version: '4'
    -
        author: Anahide Tchertchian
        date: '2011-12-12 18:00'
        message: ''
        version: '3'
    -
        author: Solen Guitter
        date: '2011-11-30 10:53'
        message: ''
        version: '2'
    -
        author: Admin name placeholder
        date: '2010-03-01 00:50'
        message: ''
        version: '1'

---
{{{multiexcerpt 'JSF-UI-required' page='generic-multi-excerpts'}}}

{{! excerpt}}
The theme is in charge of the global _layout_ or _structure_ of a page (composition of the header, footer, left menu, main area...), as well as its _branding_ or _styling_ using resources like styling or JavaScript files.
{{! /excerpt}}

&nbsp;

![]({{file name='nuxeo_theme_includes.png'}} ?w=500,align=center)

&nbsp;

If you already understand theme concepts, maybe you'd like to check [Theme and Style How-To Index]({{page page='theme-how-to-index'}}).

{{#> callout type='info' }}

Since 7.4, theme related configuration has changed: refer to [Theme Upgrade to LTS 2015]({{page version='710' space='nxdoc' page='theme-upgrade-to-lts-2015'}}) for migration instructions.

{{/callout}}

The page layout is defined using XHTML template files. Some standard templates are defined in the default application, that can be reused.

The branding uses scss dynamic files and static css files.

{{#> callout type='tip' heading='Online Style Guide'}}

An [online UI Style Guide](http://showcase.nuxeo.com/style) is available to help you design your pages, customize and style them.

{{/callout}}

## Page Layout

When defining a new page, some default pages can be included to benefit from theme features. Here is a typical page example:

```xml
<ui:composition template="/pages/workspace_page.xhtml"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets">

  <ui:define name="page title">
    My page title
  </ui:define>

  <ui:define name="body">

<div class="mainFragment">
      My page content
    </div>
  </ui:define>

</ui:composition>
```

The template at `/pages/workspace_page.xhtml` inserts a few templating zones that can be defined by the caller (in above example, `page title` and `body`).

Let's describe in more details two different default pages so that you can define your own custom pages taking example on them.

### Workspace Page Example

The [Workspace page](https://github.com/nuxeo/nuxeo/blob/master/nuxeo-jsf/nuxeo-platform-webapp-base/src/main/resources/web/nuxeo.war/pages/workspace_page.xhtml) is the standard default page, showing a header and a footer, as well as a left column (showing the import button, document explorer, clipboard...):

```xml
<ui:composition template="/pages/basic_page.xhtml"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets">
  <ui:param name="pageName" value="#{themeActions.currentPage}" />
  <ui:param name="pageFlavor" value="#{themeActions.currentFlavor}" />

  <ui:define name="basic body includes">
    <ui:include src="/incl/includes.xhtml" />
  </ui:define>

  <ui:define name="basic body">

    <ui:decorate template="/pages/header_footer_template.xhtml">
      <ui:define name="main content">

<div class="column">
          <ui:include src="/incl/import.xhtml" />
          <ui:include src="/incl/multi_tree_explorer.xhtml" />
          <ui:include src="/incl/user_clipboard.xhtml" />
        </div>

<div class="content">
          <ui:include src="/incl/breadcrumb.xhtml" />
          <ui:insert name="body" />
        </div>

<div class="clear" />
      </ui:define>
    </ui:decorate>

  </ui:define>

</ui:composition>
```

*   This template relies on another generic template, [`/pages/basic_page.xhtml`](https://github.com/nuxeo/nuxeo/blob/master/nuxeo-jsf/nuxeo-platform-webapp-base/src/main/resources/web/nuxeo.war/pages/basic_page.xhtml) , that defines the global HTML page, and inserts a few templating zones (like `basic body`).
*   The current page and flavor are retrieved thanks to the themeActions Seam component logics, which rely on _negotiations_ (see below). The corresponding resources will be included in the page head thanks to the [`/incl/page_head.xhtml`](https://github.com/nuxeo/nuxeo/blob/master/nuxeo-jsf/nuxeo-platform-webapp-base/src/main/resources/web/nuxeo.war/incl/page_head.xhtml) template.
*   The template at [`/incl/includes.xhtml`](https://github.com/nuxeo-archives/nuxeo-dm/blob/master/nuxeo-platform-webapp/src/main/resources/web/nuxeo.war/incl/includes.xhtml) is also inserted in the page body, and is useful for Drag&Drop features.

### Popup Page Example

The [Popup page](https://github.com/nuxeo/nuxeo-jsf-ui/blob/master/code/nuxeo-platform-webapp-base/src/main/resources/web/nuxeo.war/pages/popup_page.xhtml) page is the standard popup page, not showing any header or footer:

```xml
<ui:composition template="basic_page.xhtml"
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets">
  <ui:param name="pageName" value="galaxy/popup" />
  <ui:param name="pageFlavor" value="#{themeActions.getCurrentFlavor(pageName)}" />

  <ui:define name="basic body includes">
    <ui:include src="/incl/includes.xhtml" />
  </ui:define>

  <ui:define name="basic body">

    <section class="nxMainContainer">
      <ui:insert name="body" />
    </section>

  </ui:define>

</ui:composition>
```

This template uses an hardcoded page name, but still relies on [undefined](#negotiations) for current flavor resolution.

### Mechanism to Defer Parsing of JavaScript in JSF Pages

Default page templates rely on a mechanism to control where resources are included on the page. This allows to optimize the rendering of the page by:

*   declaring CSS resources first in the page head
*   pushing most of JavaScript resources to end of the page body

This relocation of tags relies on JSF 2 re-target features, and moves around components to place them inside slots defined on the [`/pages/basic_page.xhtml`](https://github.com/nuxeo/nuxeo/blob/master/nuxeo-jsf/nuxeo-platform-webapp-base/src/main/resources/web/nuxeo.war/pages/basic_page.xhtml) template.

By default, standard JavaScript resources like JSF or RichFaces Javascript files, as well as jQuery, are kept at the beginning of the body. However, most of Nuxeo default resources are pushed to the end of the page body. As a consequence, to benefit from these optimizations, inline JavaScript files should be declared using a `h:outputScript` tag instead of a bare `script` HTML tag, using variable `#{pageJsTarget}` as a target attribute:

```
<h:outputScript target="#{pageJsTarget}">
  jQuery(document).ready(function() {
    jQuery("#dropDownMenu").dropdown();
  });
</h:outputScript>
```

This mechanism is controlled by an application property, here is a sample contribution to avoid pushing JavaScript resources at the end of the body tag:

```
<require>org.nuxeo.ecm.platform.webapp.base.properties</require>
<component name="my.contribution">
  <extension target="org.nuxeo.runtime.ConfigurationService" point="configuration">
    <property name="nuxeo.jsf.deferJavaScriptLoading">false</property>
  </extension>
</component>
```

## Branding and Resources

Resources can be inserted directly inside each template.&nbsp;But some addons need to add styling and JavaScript to existing pages without changing the global structure of the page, or overriding the original XHTML template: for modularity reasons, these resources are contributed to dedicated runtime extension points that support override and merging.

### Pages

Each page using the `basic_page.xhtml` template needs to have a `page` contribution to the [`pages` extension point](http://explorer.nuxeo.org/nuxeo/site/distribution/Nuxeo Platform-7.3/viewExtensionPoint/org.nuxeo.theme.styling.service--pages): this is the main link between the page structure and its branding.

Here is an example of the `galaxy/default` default page definition:

```
<extension target="org.nuxeo.theme.styling.service" point="pages">
  <page name="galaxy/default" charset="utf-8">
    <defaultFlavor>default</defaultFlavor>
    <flavors>
      <flavor>default</flavor>
      <flavor>rainbow</flavor>
    </flavors>
    <resources>
      <bundle>nuxeo_includes</bundle>
      <bundle>nuxeo_base</bundle>
      <bundle>nuxeo_sassCss</bundle>
      <bundle>nuxeo_dm</bundle>
      <resource>my_js.js</resource>
      <resource>my_style.css</resource>
    </resources>
  </page>
</extension>

```

*   `<defaultFlavor>` refers to the default flavor used for the page. See below for `flavor` definition.
*   `<flavors>` refers to the different flavors available for this page. If the computed current flavor is not is this list, the default flavor will be used. The `flavors` element should hold an additional attribute `append="true"` when contributing new flavors to an existing page.
*   `<resources>` refers to SCSS/CSS/JavaScript resources and bundles. See below for `resources` and `bundles` definitions. The `resources` element should hold an&nbsp;additional attribute `append="true"` when contributing new resources or bundles to an existing page.

### Resources

Resources that need to be included on a page need to define a `resource` contribution to the&nbsp; [`resources` extension point](http://explorer.nuxeo.com/nuxeo/site/distribution/Nuxeo Platform-7.3/viewExtensionPoint/org.nuxeo.ecm.platform.WebResources--resources). Resources define mainly a name and a type, here are sample contributions:

```xml
<extension target="org.nuxeo.ecm.platform.WebResources" point="resources">
  <resource name="popup-utils.js">
    <uri>/scripts/popup-utils.js</uri>
  </resource>
  <resource name="video-js.css">
    <uri>/css/video-js.css</uri>
  </resource>
</extension>

```

Here the resource type is inferred from the resource name extension: it ends by ".css" for CSS files, and ".js" for JavaScript files. It can also be set explicitly on the `resource` element:

```xml
<extension target="org.nuxeo.ecm.platform.WebResources" point="resources">
  <resource name="popup-utils.js" type="js">
    <uri>/scripts/popup-utils.js</uri>
  </resource>
  <resource name="body.scss" type="css">
    <path>/sass/body.scss</path>
    <processors>
      <processor>sassCss</processor>
    </processors>
  </resource>
  <resource name="video-js.css" type="css">
    <uri>/css/video-js.css</uri>
  </resource>
</extension>

```

Several kinds of URIs are accepted to reference the resource location. Please refer to the [wro4j documentation](https://code.google.com/p/wro4j/wiki/ResourceTypes) or the [extension point documentation](http://explorer.nuxeo.com/nuxeo/site/distribution/latest/viewExtensionPoint/org.nuxeo.ecm.platform.WebResources--resources) for details.

Here files will be retrieved from the generated WAR directory (nuxeo.war)&nbsp; so you should make sure that the `OSGI-INF/deployment-fragment.xml` file of your module copies the files from the JAR there.

Alternatively, the `path` element can be used to reference the resource in the current JAR:

```xml
<extension target="org.nuxeo.ecm.platform.WebResources" point="resources">
  <resource name="popup-utils.js" type="js">
    <path>scripts/popup-utils.js</path>
  </resource>
  <resource name="body.scss" type="css">
    <path>sass/body.scss</path>
    <processors>
      <processor>sassCss</processor>
    </processors>
  </resource>
  <resource name="video-js.css" type="css">
    <path>css/video-js.css</path>
  </resource>
</extension>

```

Here is the hierarchy of files in the JAR for above use case:

<pre>.
└── src
    └── main
        └── resources
            ├── sass
            │   └── body.css
            ├── css
            │   └── video-js.css
            └── scripts
                └── popup-utils.js</pre>

{{#> callout type='tip' }}

When defining styles and JavaScript resources, you do not need to worry about using minimized versions: unless Nuxeo dev mode is enabled, all resources will be minimized by default.

{{/callout}}

### Resource Bundles

Bundles are a group of ordered resources. Bundles that need to be included on a page need to define a `bundle` contribution to the [`bundles` extension point](http://explorer.nuxeo.com/nuxeo/site/distribution/Nuxeo Platform-7.3/viewExtensionPoint/org.nuxeo.ecm.platform.WebResources--bundle):

```xml
<extension target="org.nuxeo.ecm.platform.WebResources" point="bundles">
  <bundle name="nuxeo_includes">
    <resources>
      <resource>nuxeo.js</resource>
      <resource>nuxeo.scss</resource>
      <resource>custom.css</resource>
      [...]
    </resources>
  </bundle>
</extension>

```

{{#> callout type='note' heading='Style order is important!'}}

The theme engine concatenates all the stylesheets in the order of their declaration to build one big stylesheet named `myCustomTheme-styles.css`.
Beware of the cascade!
For example a very specific stylesheet as `my_custom_styles.css` should come after the very generic `header.css`.

{{/callout}}

Bundles accept merge by adding an attribute `append="true"` to the `resources` element.

Also, most of Nuxeo default pages should already use the `nuxeo_includes` bundle (gathering most of JavaScript resources used throughout the default application), so contributing a new resource to it is a good way of making sure this resource will be present on all pages:

```xml
<extension target="org.nuxeo.ecm.platform.WebResources" point="bundles">
  <!-- Require the contribution defining the bundle -->
  <require>org.nuxeo.theme.nuxeo.webapp</require>
  <bundle name="nuxeo_base">
    <resources append="true">
      <resource>my_custom_styles.css</resource>
    </resources>
  </bundle>
</extension>

```

{{#> callout type='tip' }}

If you'd like to include all resources of a given bundle inside an XHTML page, without declaring this bundle on the `page` element (because there is no other template where these resources will be used, for instance), you can use the following tag:

```xml
<ui:fragment
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:nxr="http://nuxeo.org/nxweb/resources">

  <nxr:bundle name="my_bundle">
    <f:param name="flavor" value="default" />
  </nxr:bundle>

  [...]

</ui:fragment>
```

This will generate the following HTML code:

```xml
<link type="text/css" rel="stylesheet" href="/nuxeo/wro/api/v1/resource/bundle/my_bundle.css?flavor=default" />
<script type="text/javascript" src="/nuxeo/wro/api/v1/resource/bundle/my_bundle.js?flavor=default"></script>
```

{{/callout}}

### Resource Types

Main resources types are `scss`,&nbsp;`css` and `js`. But other types can also be used on the JSF interface for automatic inclusion using the [`nxr:bundle`](http://community.nuxeo.com/api/nuxeo/7.4/tlddoc/nxr/bundle.html) tag:

*   SCSS and CSS resources will be gathered in a single file and served by the wro servlet
*   JavaScript resources will be gathered in a single file and served by the wro servlet
*   HTML resources will be included on the page using an HTML import tag
*   Resources using type `jsfjs` or `jsfcss` will be included as JSF resources:

    ```xml
    <extension target="org.nuxeo.ecm.platform.WebResources" point="resources">
      <resource name="widget-utils.js" type="jsfjs">
        <uri>org.nuxeo:widget-utils.js</uri>
        <require>richfaces-queue.js</require>
      </resource>
    </extension>
    ```

    The `uri` scheme is `library_name:resource_name`.

*   Resources using type `xhtml` or `xhtmlfirst` will be included in the page head.
    This is useful when some resources depend on contextual parameters, resolved inside the XHTML template context. Resources of type `xhtmlfirst` will be included **before** any other types of resources inside a given bundle. Resources of type `xhtml` will be included **after** any other types of resources inside a given bundle.

### Flavors

The notion of _flavor_ makes it possible to switch some elements held by the branding (colors, logo...) without changing the associated styles: negotiators make it possible to compute this flavor depending on the context, so that, for instance, branding can be customized when navigating in some parts of the document hierarchy, relying on Nuxeo local configuration features.

Each flavor needs to have a `flavor` contribution to the [`flavors` extension point](http://explorer.nuxeo.org/nuxeo/site/distribution/Nuxeo Platform-7.3/viewExtensionPoint/org.nuxeo.theme.styling.service--flavors).
Here is an example of the default flavor:

```
<extension target="org.nuxeo.theme.styling.service" point="flavors">
  <flavor name="default">
    <sass>
      <import src="themes/palettes/common_variables.scss" />
      <import src="themes/palettes/default_variables.scss" />
     </sass>
    <label>label.theme.flavor.nuxeo.default</label>
    <palettePreview>
      <colors>
        <color>#cfecff</color>
        <color>#70bbff</color>
        <color>#4e9ae1</color>
        ...
      </colors>
    </palettePreview>
    <logo>
      <path>/img/nuxeo_logo.png</path>
      <previewPath>/img/nuxeo_preview_logo_black.png</previewPath>
      <width>92</width>
      <height>36</height>
      <title>Nuxeo</title>
    </logo>
    <links>
      <icon name="icon">/icons/favicon.png</icon>
      <icon name="shortcut icon">/icons/favicon.ico</icon>
    </links>
  </flavor>
</extension>

```

*   `common_variables.scss` &nbsp;contains all the variables that are not meant to be customizabled by users: neutral gray backgrounds, border radius, etc.

*   `default_variables.scss`&nbsp;contains all the variables that are customizable by users in Studio: main colors and backgrounds, font family, etc.

*   `sass` contributions define a list of [scss variables](http://sass-lang.com/guide) that can be reused in several places in the SCSS files.
    For example in `themes/palettes/common_variables.scss` we can define:

    ```css
    // Fonts
    $font-color: #42444e;
    $title: #213f7d;
    ```

    These variables can be used in a dynamic SCSS file, using the pattern `$variable-name` &nbsp;and will be translated in CSS by:

    ```
    html, body {
      color: #42444e;}

    h1 {
      color: #213f7d;}
    ```

*   `<label>` and `<palettePreview>` are used to display the flavor in the Theme local configuration.
*   `<logo>` is used to display the current logo associated to current flavor thanks to the template at [`/incl/nuxeo_logo.xhtml`](https://github.com/nuxeo/nuxeo/blob/10.10/nuxeo-dm/nuxeo-platform-webapp/src/main/resources/web/nuxeo.war/incl/nuxeo_logo.xhtml) (included in Nuxeo default header).

SCSS resources referencing variables will need to declare the Sass&nbsp;`processor`&nbsp;to be triggered:

```xml
<extension target="org.nuxeo.ecm.platform.WebResources" point="resources">
  <resource name="buttons_and_actions.css">
    <path>themes/css/buttons_and_actions.css</path>
    <processors>
      <processor>sassCss</processor>
    </processors>
  </resource>
</extension>

```

{{#> callout type='info' }}

Before 7.4, CSS files referencing flavor variables needed to be referenced as resources in the JAR. This is not the case anymore: and that kind of CSS files can also be placed in the resulting WAR directory.

{{/callout}}

### Processors

Custom processors can be defined and used. Some [default processors](https://code.google.com/p/wro4j/wiki/AvailableProcessors) are also available, you can refer to the [`processors` extension point](http://explorer.nuxeo.com/nuxeo/site/distribution/Nuxeo Platform-7.3/viewExtensionPoint/org.nuxeo.ecm.platform.WebResources--processors) and take example on the custom [FlavorResourceProcessor](https://github.com/nuxeo/nuxeo/blob/master/nuxeo-theme/nuxeo-theme-styling/src/main/java/org/nuxeo/theme/styling/wro/FlavorResourceProcessor.java) implementation and [registration](https://github.com/nuxeo/nuxeo/blob/master/nuxeo-theme/nuxeo-theme-styling/src/main/resources/OSGI-INF/webresources-contrib.xml).

### {{> anchor 'negotiations'}}Negotiations

You can contribute custom negotiators to the [`negotiations` extension point](http://explorer.nuxeo.com/nuxeo/site/distribution/Nuxeo%20Platform-7.3/viewExtensionPoint/org.nuxeo.theme.services.ThemeService--negotiations) to customize current page or flavor logics.

&nbsp;

* * *

<div class="row" data-equalizer data-equalize-on="medium"><div class="column medium-6">{{#> panel heading='Related pages in this documentation'}}

- [Theme How-to Index]({{page page='theme-how-to-index'}})

{{/panel}}</div><div class="column medium-6">{{#> panel heading='Related pages in other documentation'}}

- [Branding in Nuxeo Studio]({{page space='studio' page='branding'}})
- [Local Configuration]({{page space='nxdoc' page='local-configuration'}})

{{/panel}}</div></div>
