---
title: How to Translate the Nuxeo Platform
review:
    comment: ''
    date: '2015-12-01'
    status: ok
details:
    howto:
        excerpt: Learn how to translate the Nuxeo Platform
        level: Advanced
        tool: Crowdin
        topics: 'Labels, Localization, Translation'
labels:
    - i10n
    - internationalization
    - translation
    - howto
    - multiexcerpt-include
toc: true
confluence:
    ajs-parent-page-id: '4687444'
    ajs-parent-page-title: Contributing to Nuxeo
    ajs-space-key: NXDOC
    ajs-space-name: Nuxeo Platform Developer Documentation
    canonical: How+to+Translate+the+Nuxeo+Platform
    canonical_source: 'https://doc.nuxeo.com/display/NXDOC/How+to+Translate+the+Nuxeo+Platform'
    page_id: '3343476'
    shortlink: dAQz
    shortlink_source: 'https://doc.nuxeo.com/x/dAQz'
    source_link: /display/NXDOC/How+to+Translate+the+Nuxeo+Platform
history:
    - 
        author: Anahide Tchertchian
        date: '2016-06-17 07:50'
        message: ''
        version: '53'
    - 
        author: Julien Carsique
        date: '2016-01-04 10:23'
        message: ''
        version: '52'
    - 
        author: Solen Guitter
        date: '2015-09-25 09:38'
        message: ''
        version: '51'
    - 
        author: Solen Guitter
        date: '2015-09-07 14:32'
        message: ''
        version: '50'
    - 
        author: Solen Guitter
        date: '2015-06-11 12:21'
        message: Add a section Identifying a Specific Label to Translate
        version: '49'
    - 
        author: Solen Guitter
        date: '2015-05-29 09:33'
        message: Testing changes steps formatting
        version: '48'
    - 
        author: Anahide Tchertchian
        date: '2015-05-29 09:22'
        message: ''
        version: '47'
    - 
        author: Anahide Tchertchian
        date: '2015-05-29 09:19'
        message: ''
        version: '46'
    - 
        author: Anahide Tchertchian
        date: '2015-05-29 09:18'
        message: formatting
        version: '45'
    - 
        author: Anahide Tchertchian
        date: '2015-05-29 09:16'
        message: add hot reload instructions
        version: '44'
    - 
        author: Anahide Tchertchian
        date: '2015-05-27 08:09'
        message: fix typos/errors
        version: '43'
    - 
        author: Solen Guitter
        date: '2015-05-26 12:08'
        message: ''
        version: '42'
    - 
        author: Anahide Tchertchian
        date: '2015-05-22 16:48'
        message: 'NXP-16658: add more info about tests and Jenkins jobs'
        version: '41'
    - 
        author: Anahide Tchertchian
        date: '2015-05-22 16:29'
        message: 'NXP-16658: update translations doc with Crowdin integration (WIP)'
        version: '40'
    - 
        author: Anahide Tchertchian
        date: '2015-05-22 14:22'
        message: 'NXP-16658: add related pages at the end of the doc'
        version: '39'
    - 
        author: Anahide Tchertchian
        date: '2015-05-22 14:17'
        message: 'NXP-16658: start reviewing the page structure'
        version: '38'
    - 
        author: Anahide Tchertchian
        date: '2015-05-22 13:29'
        message: add TOC on the rights
        version: '37'
    - 
        author: Anahide Tchertchian
        date: '2015-04-27 09:09'
        message: add page topics
        version: '36'
    - 
        author: Florent Guillaume
        date: '2015-04-10 13:51'
        message: ''
        version: '35'
    - 
        author: Florent Guillaume
        date: '2015-04-10 13:50'
        message: updated links
        version: '34'
    - 
        author: Solen Guitter
        date: '2014-01-02 10:50'
        message: Fixed typos
        version: '33'
    - 
        author: Laurent Doguin
        date: '2013-12-30 15:30'
        message: ''
        version: '32'
    - 
        author: Solen Guitter
        date: '2013-10-21 16:19'
        message: ''
        version: '31'
    - 
        author: Solen Guitter
        date: '2013-10-21 16:13'
        message: ''
        version: '30'
    - 
        author: Solen Guitter
        date: '2013-10-21 16:12'
        message: ''
        version: '29'
    - 
        author: Laurent Doguin
        date: '2013-10-17 16:27'
        message: ''
        version: '28'
    - 
        author: Laurent Doguin
        date: '2013-10-17 14:50'
        message: ''
        version: '27'
    - 
        author: Solen Guitter
        date: '2013-02-13 18:02'
        message: ''
        version: '26'
    - 
        author: Solen Guitter
        date: '2012-09-17 09:14'
        message: Migrated to Confluence 4.0
        version: '25'
    - 
        author: Solen Guitter
        date: '2012-09-17 09:14'
        message: ''
        version: '24'
    - 
        author: Solen Guitter
        date: '2012-05-21 11:59'
        message: Updated mercurial link to github URL
        version: '23'
    - 
        author: Stéfane Fermigier
        date: '2011-08-17 14:45'
        message: ''
        version: '22'
    - 
        author: Julien Carsique
        date: '2011-08-17 13:14'
        message: >-
            update translation documentation, add login page and contribution
            informations
        version: '21'
    - 
        author: Stéfane Fermigier
        date: '2010-07-22 18:56'
        message: ''
        version: '20'
    - 
        author: Stéfane Fermigier
        date: '2010-07-22 18:42'
        message: ''
        version: '19'
    - 
        author: Stéfane Fermigier
        date: '2010-07-22 14:43'
        message: ''
        version: '18'
    - 
        author: Stéfane Fermigier
        date: '2010-07-22 10:27'
        message: ''
        version: '17'
    - 
        author: Stéfane Fermigier
        date: '2010-07-22 10:23'
        message: ''
        version: '16'
    - 
        author: Stéfane Fermigier
        date: '2010-07-22 10:12'
        message: ''
        version: '15'
    - 
        author: Stéfane Fermigier
        date: '2010-07-22 09:13'
        message: ''
        version: '14'
    - 
        author: Stéfane Fermigier
        date: '2010-07-22 09:07'
        message: ''
        version: '13'
    - 
        author: Stéfane Fermigier
        date: '2010-07-22 08:54'
        message: ''
        version: '12'
    - 
        author: Stéfane Fermigier
        date: '2010-07-22 08:50'
        message: ''
        version: '11'
    - 
        author: Stéfane Fermigier
        date: '2010-07-21 20:10'
        message: ''
        version: '10'
    - 
        author: Stéfane Fermigier
        date: '2010-07-21 20:03'
        message: ''
        version: '9'
    - 
        author: Stéfane Fermigier
        date: '2010-07-21 19:20'
        message: ''
        version: '8'
    - 
        author: Stéfane Fermigier
        date: '2010-07-21 19:00'
        message: ''
        version: '7'
    - 
        author: Stéfane Fermigier
        date: '2010-07-21 18:38'
        message: ''
        version: '6'
    - 
        author: Stéfane Fermigier
        date: '2010-07-21 18:22'
        message: ''
        version: '5'
    - 
        author: Stéfane Fermigier
        date: '2010-07-21 18:17'
        message: ''
        version: '4'
    - 
        author: Stéfane Fermigier
        date: '2010-07-21 18:11'
        message: ''
        version: '3'
    - 
        author: Stéfane Fermigier
        date: '2010-07-21 18:09'
        message: ''
        version: '2'
    - 
        author: Stéfane Fermigier
        date: '2010-07-21 18:00'
        message: ''
        version: '1'

---
Nuxeo supported modules handle English translations for each of their bundles. Other translations are managed on [Crowdin](https://crowdin.net/project/nuxeo) and synchronized automatically with the Nuxeo source code.

Here are some instructions to help you contributing or changing translations, in English or other languages.

## Instructions for Translators

### Editing on Crowdin (Non-English Translations)

[Join the Nuxeo project on Crowdin](http://crowdin.net/project/nuxeo/invite).

If you are not familiar with Crowdin, take a look at their [quick start guide](http://crowdin.net/page/quick-start) [.](http://crowdin.net/project/nuxeo/invite)
Basically here are the steps to contribute:

{{{multiexcerpt 'translation-contribution-with-crowdin' page='Contributing to Nuxeo'}}}

By default, new users have the translator status. It means you can propose new translations, but you can't validate them. To gain the proofreader status and have the validation permission, please contact one or several of the Crowdin project managers.

Now here's a couple of tips:

*   **Some phrases have placeholders** in them (like {0}). These are placeholders for values that are added later. E.g. a name: &ldquo;Hello, {0}&rdquo;, could be &ldquo;Hello, Peter&rdquo; on the website. They must remain in the translation as well, although placement may vary.

*   **If the context of a label is unclear**, please request the context from the Nuxeo team. These comments are also visible for anyone else that translates or approves translations.

Before every release, the translations are exported from Crowdin to the [nuxeo-platform-lang-ext](https://github.com/nuxeo/nuxeo-platform-lang-ext) addon by Nuxeo.

### Adding a New Language

Please contact one or several managers of the project if you'd like to contribute translations to a language that's not available on Crowdin yet.

Nuxeo developers will perform the additional steps for this language to be added to the Nuxeo source code (see [NXP-19840](https://jira.nuxeo.com/browse/NXP-19840) as a reference, for instance).

### Manual Editing (English Translations)

{{{multiexcerpt 'translation-contribution-with-github' page='Contributing to Nuxeo'}}}

{{#> callout type='warning' }}

If you'd like to include quotes in a translation that is holding placeholders, this quote should be doubled. Note that Crowdin will handle that double-quoting at export on its own, so you can disregard this warning if you are using the Crowdin UI.

{{/callout}}

### Testing Translations

To test a translation file provided by Crowdin against your Nuxeo server, you can benefit from messages labels hot reload by following these instructions:

1.  Download the messages.properties file in your language from Crowdin (after some changes to translations for instance).
    As an alternative, you can pick the current messages.properties file on your server at `$SERVER/nxserver/nuxeo.war/WEB-INF/classes/messages_xx_XX.properties` and edit it manually.
2.  Start your Nuxeo server in development mode:

    *   Go to **ADMIN** > **Update Center** > **Nuxeo Studio** and click on the dedicated button.

    *   Or add the following to the `$SERVER/bin/nuxeo.conf` file.

        ```
        org.nuxeo.dev=true
        ```

3.  Log in as Administrator.
4.  Replace the file at `$SERVER/nxserver/nuxeo.war/WEB-INF/classes/messages_xx_XX.properties` by the one you downloaded from Crowdin or edit it.
5.  Click on **Dev mode: force flush** next to the **Logout** button in the UI.
    Your translations are displayed in the UI.

    {{#> callout type='tip' }}

    If you haven't changed the default language in your preferences, you can add `?language=xx_XX` at the end of the page URL to see the page in your target language. For instance [https://nightly.nuxeo.com/nuxeo/nxpath/default/default-domain@view_documents?language=pt_BR](https://nightly.nuxeo.com/nuxeo/nxpath/default/default-domain@view_documents?language=pt_BR).

    {{/callout}}
6.  If you downloaded translations from Crowdin, do not forget to upload back your changes!

{{#> callout type='warning' }}

Files at `$SERVER/nxserver/nuxeo.war` are re-computed from Nuxeo bundles at each server startup: make sure that you have a copy of your file before restarting your server, to avoid losing your work. If you'd like these translations to be kept after a restart, follow instructions below to make translations part of a Nuxeo bundle.

{{/callout}}

### Identifying a Specific Label to Translate

If you want to translate or update a specific label you saw in the UI but you can identify it in Crowdin between several messages, follow the steps below:

1.  Activate the Dev mode on your Nuxeo server:
    1.  Go to **ADMIN** > **Update Center** > **Nuxeo Studio** and click on the dedicated button.

    2.  Or add the following to the `$SERVER/bin/nuxeo.conf` file.

        ```
        org.nuxeo.dev=true
        ```

2.  Log in as Administrator.
3.  Edit the file `$SERVER/nxserver/nuxeo.war/WEB-INF/classes/messages_xx_XX.properties` and replace the labels you want to identify and translate by their id in order to get something like `action.view.rights.management=action.view.rights.management`.
4.  Click on **Dev mode: force flush** next to the **Logout** button in the UI.

    {{#> callout type='tip' }}

    If you haven't changed the default language in your preferences, you can add `?language=xx_XX` at the end of the page URL to see the page in your target language. For instance [https://nightly.nuxeo.com/nuxeo/nxpath/default/default-domain@view_documents?language=pt_BR](https://nightly.nuxeo.com/nuxeo/nxpath/default/default-domain@view_documents?language=pt_BR).

    {{/callout}}

    The label you want to translate is replaced by its id.

### Contributions

Contributions on Crowdin side will be synchronized daily to the Nuxeo master source code. Translations that are not approved will also be taken into account.

If you are not using Crowdin, please [contribute]({{page page='contributing-to-nuxeo#translations'}}) your translation work back to Nuxeo so that other users can benefit from it.

## Instructions for Developers

In documentation below, the `xx_XX` notation will be used to reference the four letter code name for your language.

### Updating or Creating Localized Messages for a Custom Nuxeo Bundle

1.  Place your custom messages.properties file in your bundle at `src/main/resources/OSGI-INF/l10n/messages_xx_XX.properties`.
2.  Create of edit the file at `src/main/resources/OSGI-INF/deployment-fragment.xml` to contribute the translations to the main aggregated translation files used by the application:

    ```xml
    <?xml version="1.0"?>
    <fragment version="1">

      <require>org.nuxeo.ecm.platform.lang</require>
      <require>org.nuxeo.ecm.platform.lang.ext</require>

      <install>
        <delete path="${bundle.fileName}.tmp" />
        <mkdir path="${bundle.fileName}.tmp" />
        <unzip from="${bundle.fileName}" to="${bundle.fileName}.tmp" />

        <append from="${bundle.fileName}.tmp/OSGI-INF/l10n/messages_xx_XX.properties"
          to="nuxeo.war/WEB-INF/classes/messages.properties" addNewLine="true" />
        <append from="${bundle.fileName}.tmp/OSGI-INF/l10n/messages_xx_XX.properties"
          to="nuxeo.war/WEB-INF/classes/messages_xx.properties" addNewLine="true" />
        <append from="${bundle.fileName}.tmp/OSGI-INF/l10n/messages_en_US.properties"
          to="nuxeo.war/WEB-INF/classes/messages_xx_XX.properties" addNewLine="true" />

        <delete path="${bundle.fileName}.tmp" />
      </install>

    </fragment>

    ```

    In the above example, translations from the file at `messages_xx_XX.properties` are also contributed to the main `messages.properties` file (used as a fallback when translation is not defined for a given language). Translations are also contributed to the `messages_xx.properties` file, as well as the original main `messages_xx_XX.properties` file. You can adapt this behavior depending on your use case.

**Note:**

The `require` tag ensures that you are contributing to existing files, already created thanks to the default `nuxeo-platform-lang` and `nuxeo-platform-lang-ext` modules. If you are not contributing to an existing file, you should create it:

```xml
<copy from="${bundle.fileName}.tmp/OSGI-INF/l10n/messages_xx_XX.properties"
  to="nuxeo.war/WEB-INF/classes/messages_xx_XX.properties"/>
```

You can also use the require tag to control ordering of contributions to the final&nbsp;`nuxeo.war/WEB-INF/classes/messages_xx_XX.properties` file, so that you can override values for existing translations: if a duplicate key is present in the final file, the last value will be taken into account.

### Adding a New Language to a Nuxeo Application

You can add your new properties file similarly, you just need to modify the `deployment-fragment.xml` file adding a new entry with your locale:

```xml
<extension target="faces-config#APPLICATION_LOCALE">
  <locale-config>
    <supported-locale>xx_XX</supported-locale>
  </locale-config>
</extension>

```

### Understanding Locale and Lookup of Translations

Here's the resolving order when looking for a label in Brazilian, for instance.

```
messages_pt_BR.properties -> messages_pt_PT.properties -> messages_en.properties -> messages.properties
```

Brazilian is a 'dialect' of Portuguese, so there is first a fallback on Portuguese, then a fallback to the default language of the application ("en" for Nuxeo) then to messages.properties.

Most of the fallback is actually handled directly by Crowdin, the tool we use for translations. When downloading a file from Crowdin, like messages_pt_BR.properties for instance, the missing labels will be replaced by the ones from file messages_pt_PT.properties (if it exists), then by the reference English file used by Crowdin. This is why you'll see English translations by default in some non-English files.

What's with these two letter files like messages_pt.properties? Well those are actually an automatic copy of the four letter version. It's only here to have a two letter fallback when browsers language are set to a two letter format.

### Unit-Testing Translations

Test cases are available to test for default translations provided in Nuxeo bundles. To check your translation file, you can just add the following test case to your bundle:

```
package org.nuxeo.ecm.collections.lang.test;
import org.nuxeo.ecm.platform.test.TranslationTestCase;
/**
 * Simple integrity tests on messages file(s).
 */
public class TestMessages extends TranslationTestCase {
}
```

The [`TranslationTestCase`](https://github.com/nuxeo/nuxeo/blob/master/nuxeo-services/nuxeo-platform-test/src/main/java/org/nuxeo/ecm/platform/test/TranslationTestCase.java) file is defined in the `nuxeo-platform-test` module, so you should add the following to your project `pom.xml` file:

```
<dependency>
  <groupId>org.nuxeo.ecm.platform</groupId>
  <artifactId>nuxeo-platform-test</artifactId>
  <scope>test</scope>
</dependency>
```

This test case will assume that the English translation file is at the "usual" location, you can override method `getEnTranslationsPath` if you placed your properties file elsewhere. It will check for simple things: syntax errors (errors in unicode characters can prevent the file from being loaded, for instance) and duplicate entries (that can happen easily when copy/pasting translations).

Additional test cases exist if you'd like to check for consistency between translations of two different languages for instance, you can check the [TranslationEnFrTestCase](https://github.com/nuxeo/nuxeo/blob/master/nuxeo-services/nuxeo-platform-test/src/main/java/org/nuxeo/ecm/platform/test/TranslationEnFrTestCase.java) logics or the [<span class="pl-en">TestExtMessages</span>](https://github.com/nuxeo/nuxeo-platform-lang-ext/blob/master/src/test/java/org/nuxeo/ecm/platform/lang/ext/test/TestExtMessages.java) parametrized tests on the `nuxeo-platform-lang-ext` module.

### Nuxeo Crowdin Translations Synchronization Process

#### Nuxeo - Crowdin Synchronization

Since a Nuxeo application is composed of several bundles, which can contribute their own translations to the main translation file, all translation files for supported modules are aggregated and pushed to Crowdin as a "reference" file.

Only the master branch is handled by Crowdin: changes to translation files in maintenance branches will have to be committed manually in GitHub.

*   The generated aggregate file at [https://github.com/nuxeo/nuxeo-platform-lang-ext/blob/master/src/main/resources/crowdin/messages.properties](https://github.com/nuxeo/nuxeo-platform-lang-ext/blob/master/src/main/resources/crowdin/messages.properties) is generated from all supported Nuxeo modules that hold a crowdin.ini file, referencing the relative path to their messages_en_US.properties file.
    Here is a sample `crowdin.ini` file content:

    ```
    [nuxeo]
    en_US=src/main/resources/OSGI-INF/l10n/messages_en_US.properties
    ```

    So to add or remove a module translation files to the main aggregated file, you should just add or remove the crowdin.ini file from the root of the module.

*   This file is generated daily and pushed to Crowdin as the new "reference" file: you should not make any manual changes to it, otherwise they will be lost at next automatic update. You should modify the original `messages_en_US.properties` file instead.
*   If the aggregated file holds duplicate keys, or syntax errors, it will not be pushed to Crowdin (unit tests are run on the lang-ext module before pushing).
*   Modifications to the reference file have the following result on Crowdin side:
    *   Existing approved translations do not change if the reference value did not change.
    *   Existing approved translations are unapproved if the reference value changed (but current value is kept). Crowdin helps detecting these translations for proofreading.
    *   New translations are marked as untranslated (they will present the reference English value at export).
    *   Removed translations are not presented on the Crowdin UI anymore.

#### Crowdin - Nuxeo Synchronization

*   Daily, non-English translations from Crowdin are pushed to the Nuxeo source code, inside the [nuxeo-platform-lang-ext](https://github.com/nuxeo/nuxeo-platform-lang-ext/) module.
*   All translations are exported, even unapproved.
*   Untranslated labels take the reference English value by default.
*   If exported files hold duplicate keys, or syntax errors, they will not be pushed to GitHub (unit test are run on the lang-ext module before pushing).

{{#> callout type='warning' }}

An export of translations files from Crowdin requires the project to be "built" first. This build is quite costly on Crowdin side, so it will not be performed more than once every 30 minutes via the API (used by automated synchronization). In this case, you should ask one of the Crowdin project managers to build the project directly on the Crowdin UI (or wait 30 minutes) before launching the synchronization again.

{{/callout}}

### Jenkins Automated Builds

The job at [http://qa.nuxeo.org/jenkins/job/nuxeo-crowdin-synchro-check-master/](http://qa.nuxeo.org/jenkins/job/nuxeo-crowdin-synchro-check-master/) generates the aggregated messages.properties file and runs unit tests on it: this helps detecting duplicate entries in the aggregated file.

The job at [https://qapriv.nuxeo.org/jenkins/job/trigger-sync-nuxeo-crowdin/](https://qapriv.nuxeo.org/jenkins/job/trigger-sync-nuxeo-crowdin/) (requires authentication) triggers the daily synchronizations from/to Nuxeo/Crowdin. This synchronization can also be triggered manually by running the job at [https://qapriv.nuxeo.org/jenkins/job/sync-nuxeo-crowdin/](https://qapriv.nuxeo.org/jenkins/job/sync-nuxeo-crowdin/) (requires authentication).

&nbsp;

* * *

<div class="row" data-equalizer data-equalize-on="medium"><div class="column medium-6">{{#> panel heading='Related pages in current documentation'}}

*   [Localization and Translation How-To Index]({{page page='localization-and-translation-how-to-index'}})
*   [How to Upload Labels Translations in Nuxeo Studio (i18n)]({{page page='how-to-upload-labels-translations-in-nuxeo-studio-i18n'}})
*   [How to Force Locale]({{page page='how-to-force-locale'}})

&nbsp;

{{/panel}}</div><div class="column medium-6">

&nbsp;

</div></div>