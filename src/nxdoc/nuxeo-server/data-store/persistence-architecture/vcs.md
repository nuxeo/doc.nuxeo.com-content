---
title: VCS
review:
    comment: ''
    date: '2016-12-07'
    status: ok
labels:
    - lts2016-ok
    - vcs
    - fguillaume
    - vcs-component
    - content-review-lts2017
toc: true
confluence:
    ajs-parent-page-id: '20515468'
    ajs-parent-page-title: Persistence Architecture
    ajs-space-key: NXDOC
    ajs-space-name: Nuxeo Platform Developer Documentation
    canonical: VCS
    canonical_source: 'https://doc.nuxeo.com/display/NXDOC/VCS'
    page_id: '3342350'
    shortlink: DgAz
    shortlink_source: 'https://doc.nuxeo.com/x/DgAz'
    source_link: /display/NXDOC/VCS
tree_item_index: 200
history:
    -
        author: Manon Lumeau
        date: '2015-09-16 09:08'
        message: ''
        version: '44'
    -
        author: Alain Escaffre
        date: '2014-09-19 16:12'
        message: ''
        version: '43'
    -
        author: Solen Guitter
        date: '2013-11-12 12:37'
        message: ''
        version: '42'
    -
        author: Solen Guitter
        date: '2013-11-12 12:36'
        message: ''
        version: '41'
    -
        author: Florent Guillaume
        date: '2013-11-04 18:18'
        message: ''
        version: '40'
    -
        author: Florent Guillaume
        date: '2013-10-31 14:03'
        message: ''
        version: '39'
    -
        author: Solen Guitter
        date: '2013-10-29 17:36'
        message: Fixed typos
        version: '38'
    -
        author: Alain Escaffre
        date: '2013-10-27 22:20'
        message: ''
        version: '37'
    -
        author: Alain Escaffre
        date: '2013-10-27 22:18'
        message: ''
        version: '36'
    -
        author: Solen Guitter
        date: '2013-09-19 12:11'
        message: Formatting
        version: '35'
    -
        author: Solen Guitter
        date: '2013-04-09 10:27'
        message: ''
        version: '34'
    -
        author: Solen Guitter
        date: '2013-04-08 15:53'
        message: Format
        version: '33'
    -
        author: Benoit Delbosc
        date: '2013-03-22 10:52'
        message: ''
        version: '32'
    -
        author: Benoit Delbosc
        date: '2013-03-22 10:45'
        message: ''
        version: '31'
    -
        author: Benoit Delbosc
        date: '2013-03-22 10:35'
        message: Reverted from v. 28
        version: '30'
    -
        author: Benoit Delbosc
        date: '2013-03-22 10:33'
        message: ''
        version: '29'
    -
        author: Benoit Delbosc
        date: '2013-03-22 10:29'
        message: ''
        version: '28'
    -
        author: Solen Guitter
        date: '2012-12-06 11:25'
        message: ''
        version: '27'
    -
        author: Benoit Delbosc
        date: '2012-12-05 18:34'
        message: Update ACLR table
        version: '26'
    -
        author: Florent Guillaume
        date: '2012-03-06 11:40'
        message: Migrated to Confluence 4.0
        version: '25'
    -
        author: Florent Guillaume
        date: '2012-03-06 11:40'
        message: relation for 5.5
        version: '24'
    -
        author: Solen Guitter
        date: '2011-11-14 15:29'
        message: replaced 5.4.3 with 5.5
        version: '23'
    -
        author: Benoit Delbosc
        date: '2011-07-29 18:08'
        message: ''
        version: '22'
    -
        author: Benoit Delbosc
        date: '2011-07-29 18:01'
        message: Adding more info on read acls optimization
        version: '21'
    -
        author: Florent Guillaume
        date: '2011-02-16 17:09'
        message: ''
        version: '20'
    -
        author: Florent Guillaume
        date: '2011-02-14 16:15'
        message: ''
        version: '19'
    -
        author: Florent Guillaume
        date: '2011-01-27 19:30'
        message: Added ancestors table for PostgreSQL
        version: '18'
    -
        author: Florent Guillaume
        date: '2011-01-27 19:19'
        message: ''
        version: '17'
    -
        author: Florent Guillaume
        date: '2011-01-27 19:14'
        message: Updated locks table info after NXP-6054
        version: '16'
    -
        author: Stéphane Lacoin
        date: '2011-01-18 16:57'
        message: ''
        version: '15'
    -
        author: Stéphane Lacoin
        date: '2011-01-18 16:57'
        message: ''
        version: '14'
    -
        author: Stéphane Lacoin
        date: '2011-01-18 16:56'
        message: ''
        version: '13'
    -
        author: Florent Guillaume
        date: '2011-01-11 14:29'
        message: ''
        version: '12'
    -
        author: Florent Guillaume
        date: '2010-12-24 14:50'
        message: Improved File section
        version: '11'
    -
        author: Florent Guillaume
        date: '2010-12-21 18:32'
        message: Improved File section
        version: '10'
    -
        author: Florent Guillaume
        date: '2010-12-21 18:17'
        message: Added mixins info
        version: '9'
    -
        author: Florent Guillaume
        date: '2010-12-21 17:53'
        message: Updated version info
        version: '8'
    -
        author: Florent Guillaume
        date: '2010-10-13 14:24'
        message: Documented relations in 5.3.2
        version: '7'
    -
        author: Florent Guillaume
        date: '2010-06-29 11:52'
        message: ''
        version: '6'
    -
        author: Florent Guillaume
        date: '2010-06-17 19:38'
        message: ''
        version: '5'
    -
        author: Florent Guillaume
        date: '2010-06-17 19:34'
        message: ''
        version: '4'
    -
        author: Florent Guillaume
        date: '2010-06-17 19:31'
        message: ''
        version: '3'
    -
        author: Florent Guillaume
        date: '2010-06-17 19:29'
        message: ''
        version: '2'
    -
        author: Florent Guillaume
        date: '2010-06-17 17:06'
        message: ''
        version: '1'

---
The goals of VCS (Visible Content Store) are to:

*   Store information in standard SQL databases.
*   Use "natural" object mapping to tables.
*   Be fast.
*   Support full-text searches on databases having that capability.
*   Have some flexibility in the storage model to optimize certain cases at configuration time.

This section's sub-pages describe the architecture of VCS.

### "Visible SQL" Structures

When using VCS, you can directly access all your data in pure SQL: the schema of the database is a mapping of the XSD schemas you defined in the Nuxeo configuration.

### Easy Reporting

Because SQL data can be accessed directly, you may use any SQL reporting tool (Business Object, BIRT, Crystal Reports...) to build custom business reports on your documents data.

### Easy Data Injection

For big data migration you can use direct SQL injection. Although we provide import / export APIs in Nuxeo, they will never be as fast as bulk inserts. Furthermore, in some cases, you don't want the people dealing with data migration to be Nuxeo developers: in this case, using plain SQL is an advantage.

### Simple Debugging

Because data is transparently stored in SQL tables, it's very easy to have a look at them and understand exactly what is going on.

### Easy Schema Migration

With VCS, schema changes in Nuxeo are automatically propagated to the SQL level (columns are added as needed, and you are warned about extra unused columns). If you change a field type, you can just do `ALTER TABLE` to change the column type.

### Easy and Safe Hot Backup

You can hot backup your SQL database and then in a second step hot backup the binary store; in this case data will be consistent:

*   You have no risk of having a file being in the middle of an update.
*   You have no risk of having a file referenced by the SQL database that has been removed from the filesystem.

See also these additional [explanations]({{page page='backup-and-restore'}}) on why VCS ensures safe hot backups.

### Blob Storage

By default Nuxeo stores all blobs on the filesystem in a lock-free, cluster-aware manner, based on the "Content-addressable storage" paradigm. Instead of the filesystem, you can also elect to store the blobs in Amazon S3 or in other external storage systems using the appropriate plugin. See [File Storage Configuration]({{page page='file-storage-configuration'}}) for more on the blob storage mechanism.

You can also choose to store blobs in the SQL database but we don't recommend it. In our experience storing blobs in a SQL database leads to a lot of problems:

*   Performances really drops.
*   Some JDBC drivers load blobs in the JVM memory which can lead to memory issues.
*   Database backup/restore is very slow.
*   Database replication (master/slave) is very slow too.

If despite these recommendations you still want to choose this architectural option, you can use the dedicated plugin available at [https://github.com/nuxeo/nuxeo-core-binarymanager-sql/](https://github.com/nuxeo/nuxeo-core-binarymanager-sql/).
