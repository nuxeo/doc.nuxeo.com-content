---
title: How to create an empty bundle
review:
    comment: ''
    date: '2017-12-14'
    status: ok
details:
    howto:
        excerpt: Learn the basics of a Nuxeo module and is IDE agnostic.
        level: Advanced
        tool: Code
        topics: Bundle
labels:
    - lts2016-ok
    - dev-guide
    - manifest
    - bundle
    - kleturc
    - customization
    - project-structure
    - pom_xml
    - howto
    - lts2017-ok
toc: true
confluence:
    ajs-parent-page-id: '19235681'
    ajs-parent-page-title: Transversal How-Tos
    ajs-space-key: NXDOC
    ajs-space-name: Nuxeo Platform Developer Documentation
    canonical: How+to+create+an+empty+bundle
    canonical_source: 'https://doc.nuxeo.com/display/NXDOC/How+to+create+an+empty+bundle'
    page_id: '7209107'
    shortlink: kwBu
    shortlink_source: 'https://doc.nuxeo.com/x/kwBu'
    source_link: /display/NXDOC/How+to+create+an+empty+bundle
tree_item_index: 700
history:
    -
        author: Manon Lumeau
        date: '2016-08-26 15:46'
        message: ''
        version: '64'
    -
        author: Manon Lumeau
        date: '2016-08-26 13:52'
        message: 'remove wiki markup '
        version: '63'
    -
        author: Manon Lumeau
        date: '2016-08-25 16:24'
        message: remove wiki markup
        version: '62'
    -
        author: Manon Lumeau
        date: '2016-08-17 10:04'
        message: 'remove deleted page  '
        version: '61'
    -
        author: Florent Guillaume
        date: '2015-01-12 10:21'
        message: Migration of unmigrated content due to installation of a new plugin
        version: '60'
    -
        author: Florent Guillaume
        date: '2015-01-12 10:21'
        message: Migration of unmigrated content due to installation of a new plugin
        version: '59'
    -
        author: Florent Guillaume
        date: '2015-01-12 10:21'
        message: Migration of unmigrated content due to installation of a new plugin
        version: '58'
    -
        author: Florent Guillaume
        date: '2015-01-12 10:21'
        message: better parent in pom
        version: '57'
    -
        author: Florent Guillaume
        date: '2015-01-11 02:29'
        message: fix link
        version: '56'
    -
        author: Manon Lumeau
        date: '2014-09-19 15:42'
        message: Migration of unmigrated content due to installation of a new plugin
        version: '55'
    -
        author: Manon Lumeau
        date: '2014-09-19 15:42'
        message: ''
        version: '54'
    -
        author: Manon Lumeau
        date: '2014-09-19 15:42'
        message: ''
        version: '53'
    -
        author: Manon Lumeau
        date: '2014-09-18 17:07'
        message: ''
        version: '52'
    -
        author: Alain Escaffre
        date: '2014-05-03 21:00'
        message: Migration of unmigrated content due to installation of a new plugin
        version: '51'
    -
        author: Alain Escaffre
        date: '2014-05-03 21:00'
        message: Migration of unmigrated content due to installation of a new plugin
        version: '50'
    -
        author: Alain Escaffre
        date: '2014-05-03 21:00'
        message: ''
        version: '49'
    -
        author: Alain Escaffre
        date: '2014-05-03 20:59'
        message: ''
        version: '48'
    -
        author: Alain Escaffre
        date: '2014-05-03 20:58'
        message: ''
        version: '47'
    -
        author: Solen Guitter
        date: '2013-02-13 18:02'
        message: Migration of unmigrated content due to installation of a new plugin
        version: '46'
    -
        author: Solen Guitter
        date: '2013-02-13 18:02'
        message: Migration of unmigrated content due to installation of a new plugin
        version: '45'
    -
        author: Solen Guitter
        date: '2013-02-13 18:02'
        message: Migration of unmigrated content due to installation of a new plugin
        version: '44'
    -
        author: Solen Guitter
        date: '2013-02-13 18:02'
        message: ''
        version: '43'
    -
        author: Solen Guitter
        date: '2013-02-13 18:02'
        message: ''
        version: '42'
    -
        author: Solen Guitter
        date: '2013-02-13 18:01'
        message: ''
        version: '41'
    -
        author: Benjamin Jalon
        date: '2011-12-07 15:30'
        message: Migration of unmigrated content due to installation of a new plugin
        version: '40'
    -
        author: Benjamin Jalon
        date: '2011-12-07 15:30'
        message: Migration of unmigrated content due to installation of a new plugin
        version: '39'
    -
        author: Benjamin Jalon
        date: '2011-12-07 15:30'
        message: Migrated to Confluence 4.0
        version: '38'
    -
        author: Benjamin Jalon
        date: '2011-12-07 15:30'
        message: ''
        version: '37'
    -
        author: Ronan Le Gall
        date: '2011-07-29 10:09'
        message: the maven command interactions
        version: '36'
    -
        author: Wojciech Sulejman
        date: '2011-07-19 15:54'
        message: 'changed from "bundles" to "plugins" which is the recommended location for custom plugins'
        version: '35'
    -
        author: Solen Guitter
        date: '2011-05-05 19:28'
        message: ''
        version: '34'
    -
        author: Solen Guitter
        date: '2011-05-05 19:24'
        message: ''
        version: '33'
    -
        author: Solen Guitter
        date: '2011-05-05 17:42'
        message: ''
        version: '32'
    -
        author: Solen Guitter
        date: '2011-05-05 17:32'
        message: ''
        version: '31'
    -
        author: Solen Guitter
        date: '2011-05-05 17:31'
        message: ''
        version: '30'
    -
        author: Solen Guitter
        date: '2011-05-05 15:04'
        message: ''
        version: '29'
    -
        author: Solen Guitter
        date: '2011-05-05 10:14'
        message: ''
        version: '28'
    -
        author: Solen Guitter
        date: '2011-05-04 18:14'
        message: ''
        version: '27'
    -
        author: Solen Guitter
        date: '2011-05-04 17:07'
        message: ''
        version: '26'
    -
        author: Solen Guitter
        date: '2011-05-04 15:39'
        message: ''
        version: '25'
    -
        author: Solen Guitter
        date: '2011-05-04 15:03'
        message: ''
        version: '24'
    -
        author: Ronan Le Gall
        date: '2011-05-03 11:35'
        message: ''
        version: '23'
    -
        author: Ronan Le Gall
        date: '2011-05-02 18:56'
        message: ''
        version: '22'
    -
        author: Solen Guitter
        date: '2011-05-02 18:06'
        message: reorganized steps
        version: '21'
    -
        author: Ronan Le Gall
        date: '2011-04-29 10:35'
        message: ''
        version: '20'
    -
        author: Ronan Le Gall
        date: '2011-04-26 16:49'
        message: ''
        version: '19'
    -
        author: Ronan Le Gall
        date: '2011-04-26 16:38'
        message: ''
        version: '18'
    -
        author: Ronan Le Gall
        date: '2011-04-26 16:30'
        message: ''
        version: '17'
    -
        author: Ronan Le Gall
        date: '2011-04-26 15:57'
        message: ''
        version: '16'
    -
        author: Ronan Le Gall
        date: '2011-04-26 12:36'
        message: ''
        version: '15'
    -
        author: Ronan Le Gall
        date: '2011-04-22 18:01'
        message: ''
        version: '14'
    -
        author: Ronan Le Gall
        date: '2011-04-22 12:18'
        message: ''
        version: '13'
    -
        author: Solen Guitter
        date: '2011-04-22 12:05'
        message: ''
        version: '12'
    -
        author: Ronan Le Gall
        date: '2011-04-22 11:58'
        message: ''
        version: '11'
    -
        author: Ronan Le Gall
        date: '2011-04-22 11:47'
        message: ''
        version: '10'
    -
        author: Ronan Le Gall
        date: '2011-04-22 11:04'
        message: ''
        version: '9'
    -
        author: Ronan Le Gall
        date: '2011-04-22 10:40'
        message: ''
        version: '8'
    -
        author: Benjamin Jalon
        date: '2011-04-22 03:01'
        message: ''
        version: '7'
    -
        author: Ronan Le Gall
        date: '2011-04-21 19:12'
        message: ''
        version: '6'
    -
        author: Ronan Le Gall
        date: '2011-04-21 18:53'
        message: ''
        version: '5'
    -
        author: Ronan Le Gall
        date: '2011-04-21 18:34'
        message: ''
        version: '4'
    -
        author: Ronan Le Gall
        date: '2011-04-21 14:47'
        message: ''
        version: '3'
    -
        author: Ronan Le Gall
        date: '2011-04-21 12:10'
        message: ''
        version: '2'
    -
        author: Ronan Le Gall
        date: '2011-04-21 11:34'
        message: ''
        version: '1'

---
{{#> callout type='info' }}

This tutorial remains very interesting as it explains many basics of a Nuxeo module and is IDE agnostic. Yet the common way of initializing a plugin project for Nuxeo Platform is now to use [Nuxeo CLI]({{page page='nuxeo-cli'}}) which provides many bootstraps.

{{/callout}}

This recipe describes the steps to create the bare structure of a Nuxeo add-on project (aka a bundle).

This is the very first recipe of this cookbook and it will be the basis for the development of new bundles, of new features, even of new UI elements all along this cookbook. All the other recipes will assume that this recipe has been done.

{{! multiexcerpt name='recipe-tip'}} {{#> callout type='tip' heading='General Remarks'}}

*   This recipe is not specific to a system or an IDE. You will have to adapt it to your needs. The sole obligation is to use Maven available in a console and [Nuxeo CLI]({{page page='nuxeo-cli'}}) installed. But, even this part, with experience, could be fitted to your IDE habits if you have any.
*   For any remark about this recipe or about this cookbook, don't hesitate to leave us a comment on this page.

{{/callout}}{{! /multiexcerpt}}

&nbsp;

This recipe is composed of the major steps below:

*   [Step 1: Create the basic project skeleton](#create-the-basic-project-skeleton)
*   [Step 2: Created Files Description](#created-files-description)
*   [Step 3: Install and check the deployment of your Bundle](#install-and-check-the-deployment-of-your-bundle)

## What You Need

| Tool                      | Version                                                                       |
| ------------------------- | ----------------------------------------------------------------------------- |
| Java                      | [JDK 1.8](http://www.oracle.com/technetwork/java/javase/downloads/index.html) |
| Maven                     | [3.x](http://maven.apache.org/download.html)                                  |
| NodeJS                    | [6.x](https://nodejs.org/en/)                                                 |
| Nuxeo CLI                 | [latest](https://www.npmjs.com/package/nuxeo-cli)                             |
| Nuxeo Server distribution | [Latest LTS](https://www.nuxeo.com/downloads/)                                |

## Create the Basic Project Skeleton

To create a basic folder structure, we use the [Nuxeo CLI]({{page page='nuxeo-cli'}}). There is no required location to create your project.
To create your project structure, follow the steps below.

1.  In a console, type: `mkdir cookbook && cd $_`
2.  In a console, type: `nuxeo bootstrap single-module`.
2.  You are prompted a series of choices to create your project. Accept the default propositions and follow those:

    ```
  create Generating Single module
     info   Parameters: Parent group, Parent artifact, Parent version, Nuxeo version, Project group, Project artifact, Project version, Project description
? Parent Group id (use white space to cancel default value.): org.nuxeo
? Parent Artifact id: nuxeo-addons-parent
? Parent Version: 9.10
? Project Group id: org.nuxeo.cookbook
? Project Artifact id: cookbook-core
? Project version: 1.0-SNAPSHOT
? Project description: Cookbook bare project
   create pom.xml
   create src/main/resources/META-INF/MANIFEST.MF
   create src/main/java/org/nuxeo/cookbook/package-info.java
   create src/test/resources/jndi.properties
   create src/test/resources/log4j.xml
     info You can start editing code or you can continue with calling another generator (nuxeo bootstrap <generator>..)
    ```

## Complete the Folder Structure

After you completed the project creation, you get this folder structure:

<pre>cookbook
└── src
    ├── main
    │   ├── java
    │   │   └── org
    │   │       └── nuxeo
    │   │           └── cookbook
    │   └── resources
    │       ├── META-INF
    │       └── OSGI-INF
    └── test
        ├── java
        │   └── org
        │       └── nuxeo
        │           └── cookbook
        └── resources
</pre>

## Created Files Description

### The `pom.xml` File Explained

1.  Nuxeo Addon set as parent to pull all Nuxeo dependencies:

    ```xml
    <parent>
	<groupId>org.nuxeo</groupId>
	<artifactId>nuxeo-addons-parent</artifactId>
	<version>9.10</version>
    </parent>

    ```

3.  Repositories:

    Repository `public` contains all Nuxeo's bundle releases.

    ```xml
    <repository>
      <id>public</id>
      <url>http://maven.nuxeo.org/nexus/content/groups/public</url>
      <releases>
        <enabled>true</enabled>
      </releases>
      <snapshots>
        <enabled>false</enabled>
      </snapshots>
    </repository>
    ```

    Repository `public-snapshot` contains all Nuxeo's bundle snapshots.

    ```xml
    <repository>
      <id>public-snapshot</id>
      <url>http://maven.nuxeo.org/nexus/content/groups/public-snapshot</url>
      <releases>
        <enabled>false</enabled>
      </releases>
      <snapshots>
        <updatePolicy>always</updatePolicy>
        <enabled>true</enabled>
      </snapshots>
    </repository>
    ```

    Repository `nuxeo-studio` contains Studio projects.

    ```xml
    <repository>
      <id>nuxeo-studio</id>
      <url>https://connect.nuxeo.com/nuxeo/site/studio/maven</url>
      <releases>
        <enabled>true</enabled>
      </releases>
      <snapshots>
        <updatePolicy>always</updatePolicy>
        <enabled>true</enabled>
      </snapshots>
    </repository>
    ```


### The `deployment-fragment.xml` File

In order to deploy your Nuxeo addon project in the Nuxeo server, you need a new file called `deployment-fragment.xml` in the `cookbook/src/main/resources/OSGI-INF` folder. This file tells the deployment mechanism which files must be copied and where. This file is not mandatory, but it is needed to have your bundle displayed in the log at start up.

For now, the content of the file `deployment-fragment.xml` should be:

```xml
<?xml version="1.0"?>
<fragment version="1">
<!-- will contains some stuff -->
  <install>
<!-- useful later -->
  </install>
</fragment>
```

The content of this file will be completed in a coming recipe.

**Remark:**

*   If you want your bundle deployed after all other bundles/contributions, you can add a <require>all</require>
*   The deployment-fragment.xml file is not required if you have no dependency information to transmit to the runtime or pre-deployment actions to execute.

### The `MANIFEST.MF` File

As Nuxeo add-ons are OSGi modules, you have a `MANIFEST.MF` file in the `/src/main/resources/META-INF` folder.&nbsp;

Here is a sample that a `MANIFEST.MF` file must hold:

```
Bundle-ActivationPolicy: lazy
Bundle-ClassPath: .
Manifest-Version: 1.0
Bundle-Vendor: org.nuxeo.cookbook
Bundle-Version: 1.0.0
Bundle-Name: cookbook-core
Bundle-ManifestVersion: 2
Bundle-SymbolicName: org.nuxeo.cookbook.cookbook-core;singleton=true
```

Some of the values above are mandatory, some should be changed to be adapted to your needs.
The following properties are more the less "constants" and their values must always be the same:

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
```

The other properties should be customized to your needs.
The two principals are:

```
Bundle-Name: cookbook-core
Bundle-SymbolicName: org.nuxeo.cookbook.cookbook-core;singleton=true
```

*   `Bundle-Name` corresponds to the human-readable name of the bundle;
*   `Bundle-SymbolicName` is the reference computed by the OSGi container and looked-up by the other bundles. This declaration is immediately followed, on the same line, by `;singleton:=true` which declares to the OSGi container that the bundle can't cohabit with an other version of the bundle at runtime. The semi-colon is of course mandatory.

The other properties are:

*   `Bundle-Version`: This property is all on your responsibility. The Nuxeo convention is three digits separated by a dot such as "x.y.z";
*   `Bundle-Vendor`: This is the name of the add-on owner.

Although not used in this recipe, there is one more property you should know of: `Nuxeo-Component:`.
It contains a list of files used to define various elements of your component. Its use is detailed in [Writing a Bundle Manifest]({{page page='writing-a-bundle-manifest'}}).

{{! multiexcerpt name='manifest-format-warning'}}
{{#> callout type='warning' heading='Formatting'}}

The trickiest and most important part of a `MANIFEST.MF` file is its formatting. One mistake and the OSGi context can't be correctly started, leading to unexpected issues and an unreachable bundle. Here are the three formatting rules to respect:

1.  Each property name:
    *   begins at the first character of the line;
    *   ends with a colon without space between the name of the property and the colon itself.
2.  Each value:
    *   must be preceded by a space;
    *   ends with a "end of line" with eventually a comma before it.
3.  There MUST be an EMPTY LINE at the END OF THE FILE.

{{/callout}}
{{! /multiexcerpt}}

&nbsp;

### Files for the Tests

#### The `log4j.xml` File

As the tests will run in a sandbox, it could be useful to define a file named `log4j.xml` file. It must be placed in the `/src/test/resources` folder.

Here is a sample of such a file:

```xml
<root>
  <priority value="INFO" />
  <appender-ref ref="CONSOLE" />
</root>
```

To make the log more or less verbose, just change the first value of the priority value.
In this example, the level is "INFO". If you want more details, downgrade it to "DEBUG". You will have more entries displayed in the console about Nuxeo classes involved in the running tests.

## Install and Check the Deployment of Your Bundle

{{! multiexcerpt name='bundle-deployment-steps'}}

1.  Build your bundle, in a console, using the following Command Line Interface (CLI):

    ```
    $ mvn install
    ```

    In the `/target` folder of your project, you get a *JAR* file whose name is formed like that: `cookbook-core-1.0-SNAPSHOT.jar`.

2.  Copy your brand new jar into the sub-folder "nxserver/bundles/" of your Nuxeo Server's root folder:
    *   under Windows, assuming that the Nuxeo Server Distribution is installed at the location "C:\Nuxeo\", copy the jar in `C:\Nuxeo\nxserver\bundles\`;
    *   under Linux, assuming that the Nuxeo Server Distribution is installed at the location "/opt/nuxeo", copy the jar in `/opt/nuxeo/nxserver/bundles`.
3.  Start your server using the `./bin/nuxeoctl start` command

    {{#> callout type='tip' }}

    You can check the dedicated [Start and stop page]({{page page='server-start-and-stop'}}) of the technical documentation for more information about the different ways to start your server).

    {{/callout}}
4.  Check that your bundle is correctly deployed: check if its SymbolicName (as configured in the `/src/main/resources/META-INF`) appears in the logs. The logs are displayed:
    *   in the console if you started your server using the `./bin/nuxeoctl start`
    *   in the file `server.log` located in the `log` folder of your Nuxeo Server root folder. This name is found in the list of the bundles deployed by Nuxeo in the very first lines of the logs, just after the line ended by `Preprocessing order:`.

{{! /multiexcerpt}}

Now you've got a bundle ready for customization. You can start generating more stuff with the [Nuxeo CLI]({{page page='nuxeo-cli'}}) and use it to improve your Nuxeo Server instance.

&nbsp;

{{#> callout type='info' }}

As said in the beginning of this recipe, if you have unexpected errors or Nuxeo Application behavior don't forget to check [Nuxeo Answers](https://answers.nuxeo.com/)&nbsp;and don't forget to leave us a comment about this recipe or about the cookbook!

{{/callout}}

&nbsp;

* * *

<div class="row" data-equalizer data-equalize-on="medium"><div class="column medium-6">{{#> panel heading='Related How-Tos'}}

- [How-To Index ]({{page page='how-to-index'}})

{{/panel}}</div><div class="column medium-6">{{#> panel heading='Related Documentation'}}

- [Component Model ]({{page page='runtime-and-component-model'}})
- [Writing a Bundle Manifest ]({{page page='writing-a-bundle-manifest'}})

{{/panel}}</div></div>
