---
title: Runtime and Component Model
description: Nuxeo Platform is modular, and bundles, components and extension points relate to each other to let you create a fully customized application.
review:
    comment: ''
    date: '2020-10-09'
    status: ok
labels:
    - lts2016-ok
    - extension-point
    - link-update
    - bundle
    - runtime
    - runtimecomponent
    - kleturc
    - excerpt
    - lts2017-ok
toc: true
confluence:
    ajs-parent-page-id: '31033314'
    ajs-parent-page-title: Nuxeo Server
    ajs-space-key: NXDOC
    ajs-space-name: Nuxeo Platform Developer Documentation
    canonical: Runtime+and+Component+Model
    canonical_source: 'https://doc.nuxeo.com/display/NXDOC/Runtime+and+Component+Model'
    page_id: '950284'
    shortlink: DIAO
    shortlink_source: 'https://doc.nuxeo.com/x/DIAO'
    source_link: /display/NXDOC/Runtime+and+Component+Model
tree_item_index: 1700
history:
    -
        author: Solen Guitter
        date: '2016-09-05 12:13'
        message: ''
        version: '60'
    -
        author: Alain Escaffre
        date: '2015-09-24 21:23'
        message: ''
        version: '59'
    -
        author: Solen Guitter
        date: '2014-12-05 19:33'
        message: ''
        version: '58'
    -
        author: Solen Guitter
        date: '2014-10-03 15:21'
        message: ''
        version: '57'
    -
        author: Alain Escaffre
        date: '2014-09-22 23:55'
        message: ''
        version: '56'
    -
        author: Alain Escaffre
        date: '2014-09-22 23:54'
        message: ''
        version: '55'
    -
        author: Alain Escaffre
        date: '2014-09-22 23:52'
        message: ''
        version: '54'
    -
        author: Solen Guitter
        date: '2014-09-19 11:16'
        message: ''
        version: '53'
    -
        author: Solen Guitter
        date: '2013-11-13 15:20'
        message: Updated links
        version: '52'
    -
        author: Solen Guitter
        date: '2013-10-29 15:50'
        message: ''
        version: '51'
    -
        author: Solen Guitter
        date: '2013-10-21 16:49'
        message: ''
        version: '50'
    -
        author: Solen Guitter
        date: '2013-09-17 17:53'
        message: ''
        version: '49'
    -
        author: Solen Guitter
        date: '2013-09-17 17:36'
        message: ''
        version: '48'
    -
        author: Alain Escaffre
        date: '2013-09-16 23:36'
        message: ''
        version: '47'
    -
        author: Alain Escaffre
        date: '2013-09-16 23:25'
        message: ''
        version: '46'
    -
        author: Alain Escaffre
        date: '2013-09-16 23:16'
        message: ''
        version: '45'
    -
        author: Alain Escaffre
        date: '2013-09-16 23:12'
        message: Reverted from v. 41
        version: '44'
    -
        author: Alain Escaffre
        date: '2013-09-16 23:09'
        message: ''
        version: '43'
    -
        author: Alain Escaffre
        date: '2013-09-16 23:08'
        message: ''
        version: '42'
    -
        author: Alain Escaffre
        date: '2013-09-16 14:42'
        message: ''
        version: '41'
    -
        author: Alain Escaffre
        date: '2013-09-16 13:51'
        message: ''
        version: '40'
    -
        author: Alain Escaffre
        date: '2013-09-16 13:26'
        message: ''
        version: '39'
    -
        author: Alain Escaffre
        date: '2013-09-16 13:21'
        message: ''
        version: '38'
    -
        author: Alain Escaffre
        date: '2013-09-16 13:15'
        message: ''
        version: '37'
    -
        author: Alain Escaffre
        date: '2013-09-16 12:01'
        message: ''
        version: '36'
    -
        author: Alain Escaffre
        date: '2013-09-16 11:58'
        message: ''
        version: '35'
    -
        author: Alain Escaffre
        date: '2013-09-16 11:52'
        message: ''
        version: '34'
    -
        author: Alain Escaffre
        date: '2013-09-16 11:51'
        message: ''
        version: '33'
    -
        author: Alain Escaffre
        date: '2013-09-16 11:49'
        message: ''
        version: '32'
    -
        author: Alain Escaffre
        date: '2013-09-16 11:43'
        message: ''
        version: '31'
    -
        author: Solen Guitter
        date: '2013-09-04 14:35'
        message: ''
        version: '30'
    -
        author: Benjamin Jalon
        date: '2012-04-10 11:16'
        message: Migrated to Confluence 4.0
        version: '29'
    -
        author: Benjamin Jalon
        date: '2012-04-10 11:16'
        message: ''
        version: '28'
    -
        author: Benjamin Jalon
        date: '2012-04-10 11:15'
        message: ''
        version: '27'
    -
        author: Benjamin Jalon
        date: '2012-03-16 14:19'
        message: ''
        version: '26'
    -
        author: Benjamin Jalon
        date: '2012-03-16 14:02'
        message: ''
        version: '25'
    -
        author: Benjamin Jalon
        date: '2012-03-16 13:54'
        message: ''
        version: '24'
    -
        author: Stéphane Lacoin
        date: '2011-11-15 17:08'
        message: ''
        version: '23'
    -
        author: Solen Guitter
        date: '2011-01-19 11:29'
        message: ''
        version: '22'
    -
        author: Solen Guitter
        date: '2011-01-06 19:15'
        message: ''
        version: '21'
    -
        author: Solen Guitter
        date: '2011-01-06 19:08'
        message: formatting and typos
        version: '20'
    -
        author: Thierry Delprat
        date: '2010-06-02 01:46'
        message: ''
        version: '19'
    -
        author: Thierry Delprat
        date: '2010-06-02 01:45'
        message: ''
        version: '18'
    -
        author: Thierry Delprat
        date: '2010-06-02 01:44'
        message: ''
        version: '17'
    -
        author: Solen Guitter
        date: '2010-05-20 18:15'
        message: formatting and typos
        version: '16'
    -
        author: Thierry Delprat
        date: '2010-05-11 13:05'
        message: ''
        version: '15'
    -
        author: Thierry Delprat
        date: '2010-05-11 13:04'
        message: ''
        version: '14'
    -
        author: Thierry Delprat
        date: '2010-05-11 12:54'
        message: ''
        version: '13'
    -
        author: Thierry Delprat
        date: '2010-05-11 12:07'
        message: ''
        version: '12'
    -
        author: Thierry Delprat
        date: '2010-05-11 12:07'
        message: ''
        version: '11'
    -
        author: Thierry Delprat
        date: '2010-05-11 12:05'
        message: ''
        version: '10'
    -
        author: Thierry Delprat
        date: '2010-05-11 11:58'
        message: ''
        version: '9'
    -
        author: Thierry Delprat
        date: '2010-05-11 11:54'
        message: ''
        version: '8'
    -
        author: Thierry Delprat
        date: '2010-05-11 11:50'
        message: ''
        version: '7'
    -
        author: Thierry Delprat
        date: '2010-05-11 11:48'
        message: ''
        version: '6'
    -
        author: Thierry Delprat
        date: '2010-05-11 11:46'
        message: ''
        version: '5'
    -
        author: Thierry Delprat
        date: '2010-05-11 11:41'
        message: ''
        version: '4'
    -
        author: Thierry Delprat
        date: '2010-05-11 11:37'
        message: ''
        version: '3'
    -
        author: Thierry Delprat
        date: '2010-05-11 11:37'
        message: ''
        version: '2'
    -
        author: Admin name placeholder
        date: '2010-02-26 10:25'
        message: ''
        version: '1'
---

This page describes how the Nuxeo Platform is modular, and how bundles, components and extension points relate to each other to let you create a fully customized application.

## Easy Customization and Integration

One of the main goals of the Nuxeo Platform is to provide an easy and clean way to customize the platform for your application needs. That way:

- No need to hack the system to make it run
- Your custom code will be based on maintained extension points and interfaces, and will be able to be easily upgraded

For that, Nuxeo Platform provides the following patterns:

- [Bundle](#bundles): A bundle is a "plugin". It is most of the time a ".jar" file with a specific structure that aims at deploying a new set of features on the Nuxeo server. Thanks to this "bundle" notion, developers can deliver their new features in a standalone JAR that the platform will know how to start. As a result, your customization is also delivered as a plug-in, like the tens of plug-ins that are part of the Nuxeo ecosystem, and that you can find on [GitHub](https://github.com/nuxeo) or the [Nuxeo Marketplace](https://connect.nuxeo.com/nuxeo/site/marketplace).

- [Components and services](#components): A component is a software object declared via XML (and that may reference a Java class) that is used to expose some services in the framework. Thanks to this architecture, it is possible to expose a new service anywhere in the Java code executed in the platform. Services are auto-documented: you can see the list on [Nuxeo Platform Explorer](http://explorer.nuxeo.org/nuxeo/site/distribution/latest/listServices).

- [Extensions](#extensions): An extension is a mechanism leveraged by the services to let platform users inject customization in the core of the implementation. It is a pattern used frequently on products such as Mozilla, Chrome, or Eclipse. Thanks to this architecture, it is possible to go very deep in product customization, only with XML, or using our [Nuxeo Studio]({{page space='studio' page='nuxeo-studio'}}) visual environment, without any coding. You can see the list of all extension points in [Nuxeo Platform Explorer](http://explorer.nuxeo.org/nuxeo/site/distribution/latest/listExtensionPoints). Contributions to extensions are usually delivered in a custom bundle.

Implementing your own **bundle**, you will be able to contribute to existing **extensions** so as to customize your application. A lot of these configurations are supported by [Nuxeo  Studio]({{page space='studio' page ='nuxeo-studio'}}).

For instance, you can:
- Define custom [schemas and Document types]({{page page='data-store'}}) and custom lifecycles,
- Add [workflows]({{page page='workflow'}}),
- Enforce business policies:
    - Use [content automation]({{page page='automation'}}),
    - Write custom [listener scripts]({{page page='events-and-messages'}}),
- Update [global configurations for the Web UI]({{page page='web-ui-configuration-properties'}}).

When existing extensions are not enough, you can declare your own **services** or leverage existing ones in Java code: this will allow your business logics to benefit from the same kind of configurability.

In Nuxeo, everything can be configured:

{{!--     ### nx_asset ###
    path: /default-domain/workspaces/Product Management/Documentation/Documentation Screenshots/NXDOC/Master/Runtime/EP Stack
    name: EP-stack.png
    server#diagram#up_to_date
--}}
![EP Stack](nx_asset://d950d323-6b62-416c-be68-ca4e2714a680)

## Bundles, Components, Services and Extension Points

### {{> anchor 'bundles'}}Nuxeo Bundles

Inside Nuxeo Platform, software parts are packaged as Bundles. A **bundle** is a Java archive (JAR) packaged so that it
works inside a Nuxeo Application.

It typically contains:

- An [OSGi-like](https://en.wikipedia.org/wiki/OSGi) manifest file,
- Java classes,
- XML components,
- Resources,
- A deployment descriptor.

The manifest file is used to:

- Define an id for the bundle,
- Define the dependencies of the bundles (i.e.: other bundles that should be present for this bundle to run),
- List XML components that are part of the bundle.

Here is an example of a manifest file, located at `src/main/resources/META-INF/MANIFEST.MF`:

```
Manifest-Version: 1.0
Bundle-ManifestVersion: 2
Bundle-Name: NXCoreConvert
Bundle-SymbolicName: org.nuxeo.ecm.core.convert
Bundle-Localization: plugin
Require-Bundle: org.nuxeo.ecm.core.api,
 org.nuxeo.ecm.core.convert.api
Bundle-Vendor: Nuxeo
Export-package: org.nuxeo.ecm.core.convert.cache,
 org.nuxeo.ecm.core.convert.extension,
 org.nuxeo.ecm.core.convert.service
Bundle-Category: runtime
Nuxeo-Component: OSGI-INF/convert-service-framework.xml

```

Here we can see that this bundle:
- is named `org.nuxeo.ecm.core.convert`.
- depends on two other bundles: `core.api` and `convert.api`.
- contains one XML component: `convert-service-framework.xml`.

Nuxeo bundles are deployed on the Nuxeo server via the Nuxeo runtime, and provides:
- A lifecycle model for Java modules,
- A service model,
- An extension model.

When the Nuxeo runtime starts, it will try to load all Nuxeo bundles installed in the system. When all dependencies of this bundle are resolved, the framework starts the bundle. Starting a bundle means invoking a bundle activator, if any is declared in the manifest file. It also means parsing all Nuxeo components declared in the MANIFEST, and scheduling them for deployment.

In the same way that activations are performed, deactivations are also handled: each step has an equivalent step to undo changes made to the system. This mechanism provides a flexible way to build modular applications, when some resources are made available or are removed.

The mechanism is usually triggered when starting and stopping the Nuxeo server, although
[hot-reload features]({{page page='supporting-hot-reload'}}) are also supported.

Note that Nuxeo is using single class loader for all bundles.

To learn more about creating a bundle, see [HOWTO: Create an empty bundle]({{page page='how-to-create-an-empty-bundle'}}) or [HOWTO: Write a Bundle Manifest]({{page page='howto-write-a-bundle-manifest'}}).

To access a service from Java code, see [HOWTO: Use the Runtime Java API]({{page page='howto-use-the-runtime-java-api'}}).
[Use the Runtime Java API]({{page page='howto-use-the-runtime-java-api'}}).


### {{> anchor 'components'}}Nuxeo Components

A **component** is a software object declared via XML (and that may reference a Java class). The corresponding XML file is usually held by a **bundle**, in the `OSGI-INF` directory, and referenced by the `META-INF/MANIFEST.MF` file.

Each component has a unique name and can be used to:
- Declare requirements on other components,
- Declare a Java component implementation,
- Define a **service** interface,
- Contribute some extensions.

When only contributing some extensions, the component is not backed by a custom Java class: it can be "pure XML" (although some contributions will, themselves, accept Java classes for configured objects). A component is usually made of several classes and XML configuration.

Here is a schema of all the possibilities:

{{!--     ### nx_asset ###
    path: /default-domain/workspaces/Product Management/Documentation/Documentation Screenshots/NXDOC/Master/Runtime/Bundles
    name: bundles.png
    server#schema#up_to_date
--}}
![Bundles](nx_asset://c308d841-2950-4d13-a320-67bde1efeec8)


Some components are indeed holding all these different types of declarations, but we usually see the following pattern for "framework" components, defining a service and extension points:
{{!--     ### nx_asset ###
    path: /default-domain/workspaces/Product Management/Documentation/Documentation Screenshots/NXDOC/Master/Runtime/Framework Bundle
    name: bundle-framework.png
    server#schema#up_to_date
--}}
![Framework Bundle](nx_asset://cb23a2eb-649d-4693-b423-dcfc6f8ca4ad)

We usually see the following pattern for "contribution" components, defining contributions to other extension points:
{{!--     ### nx_asset ###
    path: /default-domain/workspaces/Product Management/Documentation/Documentation Screenshots/NXDOC/Master/Runtime/Configuration Bundle
    name: bundle-configuration.png
    server#schema#up_to_date
--}}
![Configuration Bundle](nx_asset://2115c276-c3f5-4d1a-a0a6-cb923c323274)

### {{> anchor 'services'}}Nuxeo Services

Components usually derive from a base class provided by Nuxeo Runtime and will be available as a singleton via a simple Nuxeo Runtime call:

```
import org.nuxeo.runtime.api.Framework;

[...]

Framework.getRuntime().getComponent(componentName)
```

Usually, components are not used directly, they are used via a **service** interface. For that, the XML components can declare which service interfaces are provided by a given component. The component can directly implement the service interface, or can delegate service interface implementation to an other class. Components must be accessed using the interfaces they provide and not through real implementation classes. Once declared the service will be available through a simple Nuxeo Runtime call:

```
import org.nuxeo.runtime.api.Framework;

[...]

Framework.getService(ServiceInterface.class)
```

To learn more about creating a service, see [HOWTO: Create a service]({{page page='how-to-create-a-service'}}).

The list of existing services can be found on the [Nuxeo Platform Explorer](http://explorer.nuxeo.org/nuxeo/site/distribution/latest/listServices).

### {{> anchor 'extensions'}}Nuxeo Extension Points and Contributions

One of the corner stones of the Nuxeo Platform is to provide components and services that can easily be configured
or extended. For that, we use the extension point system provided by Nuxeo Runtime.

This extension point system allows you to:
- Configure the behavior of components (by contributing XML configurations),
- Extend the behavior of components (by contributing Java code or scripting).

Basically, inside the Nuxeo Platform, the pattern is always the same:
- Services are provided by components,
- Components expose extension points.

The same extension point system is used all over the platform:
- Inside Nuxeo Runtime itself,
- Inside Nuxeo Core (configure and extend document storage),
- Inside the Nuxeo Service layer (configure and extend ECM services).

Each Java component can declare one or several extension points, served by one or several service interfaces.

These extension points can be used to provide:
- Configuration,
- Additional code (i.e. plug-in system).

So, most Nuxeo services are configurable and pluggable via the underlying component.

{{!--     ### nx_asset ###
    path: /default-domain/workspaces/Product Management/Documentation/Documentation Screenshots/NXDOC/Master/Runtime/Extension Points
    name: Extension Points.png
    server#diagram#up_to_date
--}}
![Extension Points](nx_asset://20532d90-c6f8-42e0-8df5-68da4a918b21)

#### Declaring an Extension Point

Extension points are declared via the XML component that declares the corresponding Java component.

Here is a simple example:
```xml
<?xml version="1.0"?>
<component name="org.nuxeo.ecm.core.convert.service.ConversionServiceImpl">
  <documentation>
    Service to handle conversions
  </documentation>
  <implementation class="org.nuxeo.ecm.core.convert.service.ConversionServiceImpl"/>
  <service>
    <provide interface="org.nuxeo.ecm.core.convert.api.ConversionService"/>
  </service>
  <extension-point name="converters">
    <documentation>
      This extension point can be used to register new converters
    </documentation>
    <object class="org.nuxeo.ecm.core.convert.extension.ConverterDescriptor"/>
  </extension-point>
  <extension-point name="configuration">
    <documentation>
      This extension point can be used to configure conversion service
    </documentation>
    <object class="org.nuxeo.ecm.core.convert.extension.GlobalConfigDescriptor"/>
  </extension-point>
</component>
```

What we can read in this XML component is:

- A Java component (via the `<component>` tag) with a unique id (into the `name` attribute) is declared;
- This component declares a new service interface (via the `<implementation>` tag) -- the component name and service interface do not need to be identical, like in this example;
- The declaration of the `ConvertService` interface (used to also fetch it) implemented by `ConvertServiceImpl` Java implementation,
- This service expose two extension points:
    - One to contribute configuration (`configuration`),
    - One to contribute some Java code (new `converter` plugin).

Each extension point has his own XML structure descriptor, to specify the XML fragment expected for this extension point:
- `org.nuxeo.ecm.core.convert.extension.ConverterDescriptor`
- `org.nuxeo.ecm.core.convert.extension.GlobalConfigDescriptor`

This description is defined directly into these classes by annotations. Nuxeo Runtime instanced descriptors and delivers it to the Java component implementation each time a new contribution to these extension points is detected.

**Each Nuxeo extension point uses this pattern to declare configuration possibilities, service integration, extension behavior, merge, override, etc.**
This pattern is used by all extension points in Nuxeo, and you can use this same infrastructure to declare your own business services.

To learn more about creating an extension point and a related service, see
[HOWTO: Create a service]({{page page='how-to-create-a-service'}}).

#### Contributing to an Extension Point

XML components can also be used to contribute to extension points.

For that, the XML component needs to:

- Be referenced in a manifest bundle,
- Specify a target extension point,
- Provide the XML content expected by the target extension point.

Expected XML syntax is defined by the [XMap object]({{page page='how-to-define-a-runtime-xmap-object'}}) referenced in the extension point declaration.
This oject's javadoc is also visible on the extension point page in the Explorer, see [*Contribution Descriptors* on a sample page](https://explorer.nuxeo.com/nuxeo/site/distribution/latest/viewExtensionPoint/org.nuxeo.ecm.core.event.EventServiceComponent--listener#toc1).

Here is an example contribution to the extension point presented above:

```xml
<?xml version="1.0"?>
<component name="org.nuxeo.ecm.platform.convert.plugins">
  <extension target="org.nuxeo.ecm.core.convert.service.ConversionServiceImpl" point="converter">
    <converter name="zip2html" class="org.nuxeo.ecm.platform.convert.plugins.Zip2HtmlConverter">
      <destinationMimeType>text/html</destinationMimeType>
      <sourceMimeType>application/zip</sourceMimeType>
    </converter>
  </extension>
</component>
```

To learn more about contributing to existing extension points, see
[HOWTO: Contribute to an Extension]({{page page='how-to-contribute-to-an-extension'}}).

#### Extension Points Everywhere

The Nuxeo Platform uses extension points extensively, to let you extend and configure most of the features provided by the platform.

The list of existing extension points can be found on the [Nuxeo Platform Explorer](http://explorer.nuxeo.org/nuxeo/site/distribution/latest/listExtensionPoints).

## {{> anchor 'packages'}}Nuxeo Packages

The Nuxeo main bundles are made available on the Nuxeo server by default. To deploy custom bundles, a
[Nuxeo Package]({{page page='creating-nuxeo-packages'}}) can be created.

This package can hold bundles, related libraries, as well as [configuration templates]({{page page='configuration-templates'}}).

Now, you may want to understand [how those packages are deployed on a Nuxeo server]({{page page='understanding-bundles-deployment'}}).

* * *

<div class="row" data-equalizer data-equalize-on="medium">
  <div class="column">

{{#> panel heading='Related Documentation'}}
- [Understanding Bundles Deployment]({{page page='understanding-bundles-deployment'}})
- [Explorer Documentation]({{page page='explorer'}})
- [Nuxeo CLI]({{page page='nuxeo-cli'}})
{{/panel}}

  </div>
</div>
